message_cmd :
 msg_start opt_attributes op_msg_wait { 
	print_message(0,$<str>2,atoi($<str>3));
	start_state("message",0);
} 
msg_end
 | msg_start 
        op_caption
        op_icon
        op_buttons
        op_disable_msg
        op_returning_msg msg_end
;


msg_start : KWMESSAGE {start_state("message",1);} fgl_expr_concat ;

msg_end : {start_state("message",0);} ;


op_msg_wait : {strcpy($<str>$,"0");} | WAIT_FOR_KEY {strcpy($<str>$,"1");} 
;
