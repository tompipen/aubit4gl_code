#!/bin/sh

#This is Aubit 4gl compiler warper script

AUBITDIR=`aubit-config AUBITDIR`

if [ "$AUBITDIR" = "" ]; then
    echo "ERROR: AUBITDIR is empty. Stop."
	aubit-config AUBITDIR
    exit 3
fi

#echo "hello from aubit"

PATH=$AUBITDIR/bin:$PATH
LD_LIBRARY_PATH=$AUBITDIR/lib:$LD_LIBRARY_PATH
if [ "$COMSPEC" != "" ]; then
	PATH=$AUBITDIR/lib:$PATH
fi
export AUBITDIR PATH LD_LIBRARY_PATH

if [ $# -lt 1 -o "$1" = "--help" ]
then
    echo
	echo Aubit 4gl compiler warper script: $0
    echo
    echo Usage:
    echo '  aubit <command> <parameters...>'
	echo
    echo ' For details, try: '
    echo '    aubit <command> --help'
    echo '    where <command> is one of the following:'
	echo ' 4glpc - main compiler script'
    echo ' 4glc - 4gl to C-code compiler'
    echo ' 4glp - 4gl to Perl-code compiler'
	echo ' fcompile - form file (.per) compiler'
    echo ' mcompile - menu file (.menu) compiler'
    echo ' mkemess  - help file (.hlp) compiler'
    echo
    echo ' Use "aubit-config" to inspect Aubit compiler configuration '
    echo
	exit 1
fi

COMMAND=$1

#FIXME: on CygWin, we must add "bash" in front of "4glpc" otherwise standard "sh" will be
#used and give us bunch of errors in 4glpc. We need to recognize and fix this here

   ################
   case $COMMAND in
   ################

   *)
        $@

   ;;

  ####
  esac
  ####


#----------------------------- EOF --------------------------

