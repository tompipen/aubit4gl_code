<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VDC: /e/ms/QT/fieldparsers/xml2form.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">VDC</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>/e/ms/QT/fieldparsers/xml2form.cpp</h1>  </div>
</div>
<div class="contents">
<a href="xml2form_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//--------------------------------------------------------- (C) VENTAS AG 2009 -</span>
<a name="l00002"></a>00002 <span class="comment">// Project      : VENTAS Desktop Client for A4gl</span>
<a name="l00003"></a>00003 <span class="comment">// Filename     : xml2form.h </span>
<a name="l00004"></a>00004 <span class="comment">// Description  : contains the xml2form class definition </span>
<a name="l00005"></a>00005 <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">// This file may be used under the terms of the GNU General Public</span>
<a name="l00008"></a>00008 <span class="comment">// License version 2.0 as published by the Free Software Foundation</span>
<a name="l00009"></a>00009 <span class="comment">// (http://www.gnu.org/licenses/gpl-2.0.html)</span>
<a name="l00010"></a>00010 <span class="comment">//</span>
<a name="l00011"></a>00011 <span class="comment">// This file is provided AS IT IS with NO WARRANTY OF ANY KIND, INCLUDING THE</span>
<a name="l00012"></a>00012 <span class="comment">// WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
<a name="l00013"></a>00013 <span class="comment">// If you need professional Support please contact us at www.ventas.de</span>
<a name="l00014"></a>00014 <span class="comment">// Enjoy using it!</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;QTextEdit&gt;</span> 
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;QTableWidget&gt;</span> 
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;QPushButton&gt;</span> 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;QAction&gt;</span> 
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;QItemDelegate&gt;</span> 
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;QScrollBar&gt;</span> 
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;QStandardItemModel&gt;</span> 
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;QHeaderView&gt;</span> 
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;QBuffer&gt;</span> 
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;QtWebKit&gt;</span> 
<a name="l00027"></a>00027  
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="xml2form_8h.html">xml2form.h</a>&quot;</span> 
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;models/table.h&gt;</span>
<a name="l00030"></a>00030  
<a name="l00031"></a>00031  
<a name="l00032"></a>00032 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00033"></a>00033 <span class="comment">// Method       : XML2Form() </span>
<a name="l00034"></a>00034 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l00035"></a>00035 <span class="comment">// Description  : constructor for the instances </span>
<a name="l00036"></a>00036 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00037"></a>00037  
<a name="l00038"></a><a class="code" href="classXML2Form.html#aea85912c9f4c7e61406086464fdcb076">00038</a> <a class="code" href="classXML2Form.html#aea85912c9f4c7e61406086464fdcb076">XML2Form::XML2Form</a>() : QWidget() 
<a name="l00039"></a>00039 { 
<a name="l00040"></a>00040 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;XML2Form&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00041"></a>00041    <a class="code" href="classXML2Form.html#a984c469e4d9c9ffc99c99897bd3122bf">i_cnt</a>= 0; 
<a name="l00042"></a>00042    <a class="code" href="classXML2Form.html#a765978f88c9ea144f7488fffa3f011f3">tableV</a> = NULL; 
<a name="l00043"></a>00043    <a class="code" href="classXML2Form.html#ae48311c25310084db4c3847ca6d38246">xmlformLayout</a> = <span class="keyword">new</span> QGridLayout; 
<a name="l00044"></a>00044  
<a name="l00045"></a>00045    {  <span class="comment">// create dummy label to detect the used colors </span>
<a name="l00046"></a>00046       <span class="comment">// </span>
<a name="l00047"></a>00047       QLabel colorDummyLabel; 
<a name="l00048"></a>00048       <a class="code" href="classXML2Form.html#aaf96ae45cb0c2c4c58e9e6d86385c0c4">qcol_BaseColor</a> =  
<a name="l00049"></a>00049          colorDummyLabel.palette().color(QPalette::Background); 
<a name="l00050"></a>00050    } 
<a name="l00051"></a>00051  
<a name="l00052"></a>00052  
<a name="l00053"></a>00053    <a class="code" href="classXML2Form.html#a7d4f92c44bd1ac3f9a8aa31c8081f077">i_cntFolder</a>   = 0; 
<a name="l00054"></a>00054    <a class="code" href="classXML2Form.html#a5053e99259b0e7720ce7e9ad5ba397f8">i_cntPage</a>     = 0; 
<a name="l00055"></a>00055  
<a name="l00056"></a>00056    <a class="code" href="classXML2Form.html#a81704c4b6c2ec90cd5dab7c6617b2349">b_table</a> = <span class="keyword">false</span>; 
<a name="l00057"></a>00057  
<a name="l00058"></a>00058    <a class="code" href="classXML2Form.html#ac74f0507d6417126e8f10a81f659d51d">inp_arr_fields</a>.appendChild(<a class="code" href="classXML2Form.html#ac74f0507d6417126e8f10a81f659d51d">inp_arr_fields</a>.createElement(<span class="stringliteral">&quot;INPARRFIELDS&quot;</span>)); 
<a name="l00059"></a>00059   
<a name="l00060"></a>00060    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a> = NULL; 
<a name="l00061"></a>00061  
<a name="l00062"></a>00062    <span class="comment">// init the pageLayouts array for later QTabWidget handling </span>
<a name="l00063"></a>00063    <span class="comment">// </span>
<a name="l00064"></a>00064    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;5; i++){ 
<a name="l00065"></a>00065       <a class="code" href="classXML2Form.html#a3f1e41e202d65c9bf760c03aa7b3e440">p_arr_PageLayouts</a>[5] = NULL; 
<a name="l00066"></a>00066       <a class="code" href="classXML2Form.html#af9e35a7f57bce3c06e15b1ded76f5155">p_arr_PageTitle</a>[5]   = NULL; 
<a name="l00067"></a>00067    } 
<a name="l00068"></a>00068  
<a name="l00069"></a>00069    <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a> = 0; 
<a name="l00070"></a>00070  
<a name="l00071"></a>00071    <span class="comment">// init the XMLFields array for later field handling </span>
<a name="l00072"></a>00072    <span class="comment">// </span>
<a name="l00073"></a>00073    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;800; i++){ 
<a name="l00074"></a>00074       <a class="code" href="classXML2Form.html#abfb6a1adcacc676da34e9bafa8f2eb39">p_arr_XMLFields</a>[i]=NULL; 
<a name="l00075"></a>00075    } 
<a name="l00076"></a>00076  
<a name="l00077"></a>00077    <a class="code" href="classXML2Form.html#aca390efca9cfb6233372fe20f583c2ab">b_tableColumnUsed</a>=<span class="keyword">false</span>; 
<a name="l00078"></a>00078 } 
<a name="l00079"></a>00079  
<a name="l00080"></a>00080  
<a name="l00081"></a>00081 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00082"></a>00082 <span class="comment">// Method       : ~XML2Form() </span>
<a name="l00083"></a>00083 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l00084"></a>00084 <span class="comment">// Description  : destructor for the instances </span>
<a name="l00085"></a>00085 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00086"></a>00086  
<a name="l00087"></a><a class="code" href="classXML2Form.html#a016742be563e446478aa39682db1f816">00087</a> <a class="code" href="classXML2Form.html#a016742be563e446478aa39682db1f816">XML2Form::~XML2Form</a>(){ 
<a name="l00088"></a>00088 } 
<a name="l00089"></a>00089  
<a name="l00090"></a>00090  
<a name="l00091"></a>00091 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00092"></a>00092 <span class="comment">// Method       : outputTree() </span>
<a name="l00093"></a>00093 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l00094"></a>00094 <span class="comment">// Description  : prepares the xml for a form and provide its layout </span>
<a name="l00095"></a>00095 <span class="comment">//                - makes recursion  </span>
<a name="l00096"></a>00096 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00097"></a>00097  
<a name="l00098"></a><a class="code" href="classXML2Form.html#a4302872a12a04aa016619a235698a8db">00098</a> <span class="keywordtype">void</span> <a class="code" href="classXML2Form.html#a4302872a12a04aa016619a235698a8db">XML2Form::outputTree</a>(<span class="keyword">const</span> QDomNode&amp; domNode, QLayout* parent) 
<a name="l00099"></a>00099 { 
<a name="l00100"></a>00100 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;outputTree&quot;</span>, <span class="stringliteral">&quot;const QDomNode&amp; domNode, QLayout* parent&quot;</span>);
<a name="l00101"></a>00101    QDomNodeList children = domNode.childNodes(); 
<a name="l00102"></a>00102    <a class="code" href="classXML2Form.html#a3e475b021d282927ffd56f28c6836477">tableWidget</a> = <span class="keyword">new</span> <a class="code" href="classTableView.html">TableView</a>(); 
<a name="l00103"></a>00103  
<a name="l00104"></a>00104    <span class="comment">// checking domNodes childNodes for relevant form elements </span>
<a name="l00105"></a>00105    <span class="comment">// and handle theire attributes  </span>
<a name="l00106"></a>00106    <span class="comment">// </span>
<a name="l00107"></a>00107    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;children.count(); ++i){ 
<a name="l00108"></a>00108  
<a name="l00109"></a>00109       QDomNode child = children.at(i); 
<a name="l00110"></a>00110       <span class="keywordflow">if</span>(!child.isElement()){ 
<a name="l00111"></a>00111          <span class="keywordflow">continue</span>; 
<a name="l00112"></a>00112       } 
<a name="l00113"></a>00113  
<a name="l00114"></a>00114       QDomElement childElement = child.toElement(); 
<a name="l00115"></a>00115  
<a name="l00116"></a>00116       <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;Form&quot;</span>){ 
<a name="l00117"></a>00117          <a class="code" href="classXML2Form.html#a66eb7e8e2ca2f84f01e7175a518679a9">i_formWidth</a>  = childElement.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00118"></a>00118          <a class="code" href="classXML2Form.html#a9ec68b9ec9319af60841934e2f9dd132">i_formHeight</a> = childElement.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt(); 
<a name="l00119"></a>00119  
<a name="l00120"></a>00120       } 
<a name="l00121"></a>00121  
<a name="l00122"></a>00122       <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;RecordView&quot;</span>){ 
<a name="l00123"></a>00123          <a class="code" href="classXML2Form.html#a9111b53f6b6c4f5c1433eb018b1a5434">recordViews</a> &lt;&lt; childElement; 
<a name="l00124"></a>00124       } 
<a name="l00125"></a>00125  
<a name="l00126"></a>00126       <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;Folder&quot;</span>){ 
<a name="l00127"></a>00127          <span class="keywordflow">if</span>(!<a class="code" href="classXML2Form.html#a7d4f92c44bd1ac3f9a8aa31c8081f077">i_cntFolder</a>){ 
<a name="l00128"></a>00128             <a class="code" href="classXML2Form.html#a7d4f92c44bd1ac3f9a8aa31c8081f077">i_cntFolder</a>++; 
<a name="l00129"></a>00129          } 
<a name="l00130"></a>00130       } 
<a name="l00131"></a>00131  
<a name="l00132"></a>00132       <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;Page&quot;</span>){ 
<a name="l00133"></a>00133          <span class="comment">// getting the tabs title </span>
<a name="l00134"></a>00134          <span class="comment">// </span>
<a name="l00135"></a>00135          <a class="code" href="classXML2Form.html#af9e35a7f57bce3c06e15b1ded76f5155">p_arr_PageTitle</a>[<a class="code" href="classXML2Form.html#a5053e99259b0e7720ce7e9ad5ba397f8">i_cntPage</a>] =  
<a name="l00136"></a>00136                <span class="keyword">new</span> QString(childElement.attribute(<span class="stringliteral">&quot;text&quot;</span>)); 
<a name="l00137"></a>00137  
<a name="l00138"></a>00138          <a class="code" href="classXML2Form.html#a5053e99259b0e7720ce7e9ad5ba397f8">i_cntPage</a>++; 
<a name="l00139"></a>00139       } 
<a name="l00140"></a>00140  
<a name="l00141"></a>00141       <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;FormField&quot;</span> || 
<a name="l00142"></a>00142          childElement.nodeName() == <span class="stringliteral">&quot;Label&quot;</span>     || 
<a name="l00143"></a>00143          childElement.nodeName() == <span class="stringliteral">&quot;HLine&quot;</span>     || 
<a name="l00144"></a>00144          childElement.nodeName() == <span class="stringliteral">&quot;Matrix&quot;</span>){ 
<a name="l00145"></a>00145  
<a name="l00146"></a>00146  
<a name="l00147"></a>00147          <span class="comment">// form field relevant elements found </span>
<a name="l00148"></a>00148          <span class="comment">// so we&#39;ve to handle them </span>
<a name="l00149"></a>00149          <span class="comment">// </span>
<a name="l00150"></a>00150          <a class="code" href="classXML2Form.html#a97a812b4c01de1a025894fbbc5e1270f">handleFormField</a>(childElement, parent); 
<a name="l00151"></a>00151  
<a name="l00152"></a>00152       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;TableColumn&quot;</span>){ 
<a name="l00153"></a>00153          QSortFilterProxyModel *proxyModel; 
<a name="l00154"></a>00154          <a class="code" href="classTableModel.html">TableModel</a> *tab;  
<a name="l00155"></a>00155  
<a name="l00156"></a>00156          <span class="keywordflow">if</span>(!<a class="code" href="classXML2Form.html#a81704c4b6c2ec90cd5dab7c6617b2349">b_table</a>){ 
<a name="l00157"></a>00157             <a class="code" href="classXML2Form.html#a11097ff5d10cd176646e3c154405c035">i_screenRecRow</a> = domNode.toElement().attribute(<span class="stringliteral">&quot;pageSize&quot;</span>).toInt(); 
<a name="l00158"></a>00158             <a class="code" href="classXML2Form.html#ac6c302b110a9608d7f607199a22d8a7b">i_screenRecCol</a> = children.count(); 
<a name="l00159"></a>00159             <a class="code" href="classXML2Form.html#a66eb7e8e2ca2f84f01e7175a518679a9">i_formWidth</a>  = childElement.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00160"></a>00160             <a class="code" href="classXML2Form.html#a9ec68b9ec9319af60841934e2f9dd132">i_formHeight</a> = childElement.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt(); 
<a name="l00161"></a>00161  
<a name="l00162"></a>00162             <a class="code" href="classXML2Form.html#ad1f3322e4844ad7ede46bd5a2360d4f6">handleTableColumn</a>(childElement.parentNode().toElement(), parent); 
<a name="l00163"></a>00163  
<a name="l00164"></a>00164             <a class="code" href="classXML2Form.html#a81704c4b6c2ec90cd5dab7c6617b2349">b_table</a> = <span class="keyword">true</span>; 
<a name="l00165"></a>00165              
<a name="l00166"></a>00166             proxyModel = <span class="keyword">static_cast&lt;</span>QSortFilterProxyModel*<span class="keyword">&gt;</span> (<a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;model());; 
<a name="l00167"></a>00167             tab = <span class="keyword">static_cast&lt;</span><a class="code" href="classTableModel.html">TableModel</a>*<span class="keyword">&gt;</span> (proxyModel-&gt;sourceModel()); 
<a name="l00168"></a>00168  
<a name="l00169"></a>00169             tab-&gt;<a class="code" href="classTableModel.html#a3cf9e7d2a7d75f156247d572df42d669">qs_tabName</a> = childElement.parentNode().toElement().attribute(<span class="stringliteral">&quot;tabName&quot;</span>); 
<a name="l00170"></a>00170             <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;<a class="code" href="classTableView.html#aa26e19998b21b401d0f7b4c703a7c91d">tabName</a> = childElement.parentNode().toElement().attribute(<span class="stringliteral">&quot;tabName&quot;</span>); 
<a name="l00171"></a>00171  
<a name="l00172"></a>00172             <a class="code" href="classXML2Form.html#ac74f0507d6417126e8f10a81f659d51d">inp_arr_fields</a>.appendChild(<a class="code" href="classXML2Form.html#ac74f0507d6417126e8f10a81f659d51d">inp_arr_fields</a>.createElement(<span class="stringliteral">&quot;INPARRFIELDS&quot;</span>)); 
<a name="l00173"></a>00173          } 
<a name="l00174"></a>00174          proxyModel = <span class="keyword">static_cast&lt;</span>QSortFilterProxyModel*<span class="keyword">&gt;</span> (<a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;model());; 
<a name="l00175"></a>00175          tab = <span class="keyword">static_cast&lt;</span><a class="code" href="classTableModel.html">TableModel</a>*<span class="keyword">&gt;</span> (proxyModel-&gt;sourceModel()); 
<a name="l00176"></a>00176  
<a name="l00177"></a>00177          QString colName; 
<a name="l00178"></a>00178          colName.append(childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>)); 
<a name="l00179"></a>00179          <span class="keywordflow">if</span>(tab != NULL){ 
<a name="l00180"></a>00180             tab-&gt;<a class="code" href="classTableModel.html#af80c02eb0f33a2c10804aae3c35699f8">qsl_colNames</a> &lt;&lt; colName; 
<a name="l00181"></a>00181          } 
<a name="l00182"></a>00182  
<a name="l00183"></a>00183          QDomElement firstChild = childElement.firstChild().toElement(); 
<a name="l00184"></a>00184          <span class="keywordflow">if</span>(firstChild.nodeName() == <span class="stringliteral">&quot;Edit&quot;</span> || 
<a name="l00185"></a>00185             firstChild.nodeName() == <span class="stringliteral">&quot;ButtonEdit&quot;</span> || 
<a name="l00186"></a>00186             firstChild.nodeName() == <span class="stringliteral">&quot;TextEdit&quot;</span> || 
<a name="l00187"></a>00187             firstChild.nodeName() == <span class="stringliteral">&quot;DateEdit&quot;</span> || 
<a name="l00188"></a>00188             firstChild.nodeName() == <span class="stringliteral">&quot;ComboBox&quot;</span>){ 
<a name="l00189"></a>00189  
<a name="l00190"></a>00190            tab-&gt;<a class="code" href="classTableModel.html#a8cdd6044f20e1442e77bab8f74a3d2fe">v_colTabNames</a> &lt;&lt; childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00191"></a>00191          } 
<a name="l00192"></a>00192  
<a name="l00193"></a>00193           
<a name="l00194"></a>00194       }<span class="keywordflow">else</span>{ 
<a name="l00195"></a>00195         
<a name="l00196"></a>00196          <span class="comment">// checking the layout type we have to deal with: </span>
<a name="l00197"></a>00197          <span class="comment">// </span>
<a name="l00198"></a>00198          <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a> = 0; 
<a name="l00199"></a>00199          <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;VBox&quot;</span>){ 
<a name="l00200"></a>00200             <span class="keywordtype">int</span> i_vboxWidth; 
<a name="l00201"></a>00201             <span class="keywordtype">int</span> i_vboxHeight; 
<a name="l00202"></a>00202  
<a name="l00203"></a>00203             i_vboxWidth  = childElement.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00204"></a>00204             i_vboxHeight = childElement.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt(); 
<a name="l00205"></a>00205  
<a name="l00206"></a>00206             <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a> = <span class="keyword">new</span> QVBoxLayout; 
<a name="l00207"></a>00207             <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a>-&gt;setAlignment(Qt::AlignLeft | Qt::AlignTop); 
<a name="l00208"></a>00208  
<a name="l00209"></a>00209  
<a name="l00210"></a>00210          }<span class="keywordflow">else</span>{  
<a name="l00211"></a>00211  
<a name="l00212"></a>00212             <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;Grid&quot;</span> || 
<a name="l00213"></a>00213                childElement.nodeName() == <span class="stringliteral">&quot;Screen&quot;</span>){ 
<a name="l00214"></a>00214                <span class="keywordtype">int</span> i_gridWidth; 
<a name="l00215"></a>00215                <span class="keywordtype">int</span> i_gridHeight; 
<a name="l00216"></a>00216  
<a name="l00217"></a>00217                i_gridWidth  = childElement.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00218"></a>00218                i_gridHeight = childElement.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt(); 
<a name="l00219"></a>00219  
<a name="l00220"></a>00220                <span class="keywordflow">if</span>(<a class="code" href="classXML2Form.html#a7d4f92c44bd1ac3f9a8aa31c8081f077">i_cntFolder</a>){ 
<a name="l00221"></a>00221                   <a class="code" href="classXML2Form.html#a3f1e41e202d65c9bf760c03aa7b3e440">p_arr_PageLayouts</a>[<a class="code" href="classXML2Form.html#a5053e99259b0e7720ce7e9ad5ba397f8">i_cntPage</a>] = <span class="keyword">new</span> QGridLayout; 
<a name="l00222"></a>00222                   <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a> = <a class="code" href="classXML2Form.html#a3f1e41e202d65c9bf760c03aa7b3e440">p_arr_PageLayouts</a>[<a class="code" href="classXML2Form.html#a5053e99259b0e7720ce7e9ad5ba397f8">i_cntPage</a>]; 
<a name="l00223"></a>00223  
<a name="l00224"></a>00224                }<span class="keywordflow">else</span>{ 
<a name="l00225"></a>00225                   <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a> = <span class="keyword">new</span> QGridLayout; 
<a name="l00226"></a>00226                } 
<a name="l00227"></a>00227  
<a name="l00228"></a>00228                <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00229"></a>00229                   <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a>-&gt;setEnabled(<span class="keyword">false</span>); 
<a name="l00230"></a>00230                } 
<a name="l00231"></a>00231  
<a name="l00232"></a>00232                QSize sizeGrid(i_gridWidth, i_gridHeight); 
<a name="l00233"></a>00233             } 
<a name="l00234"></a>00234          } 
<a name="l00235"></a>00235  
<a name="l00236"></a>00236          <span class="comment">// if a new layout node was found we make a recursive call  </span>
<a name="l00237"></a>00237          <span class="comment">// with that layout otherwise we make the recursive call </span>
<a name="l00238"></a>00238          <span class="comment">// with the old layout wich is represented by the parent pointer </span>
<a name="l00239"></a>00239          <span class="comment">// </span>
<a name="l00240"></a>00240          <span class="keywordflow">if</span>(<a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a>){ 
<a name="l00241"></a>00241             <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QBoxLayout&quot;</span>)) { 
<a name="l00242"></a>00242                QBoxLayout* boxLayout = (QBoxLayout*)parent; 
<a name="l00243"></a>00243  
<a name="l00244"></a>00244                <span class="keywordflow">if</span>(!childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00245"></a>00245                   boxLayout-&gt;addLayout(<a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a>); 
<a name="l00246"></a>00246                } 
<a name="l00247"></a>00247  
<a name="l00248"></a>00248             }<span class="keywordflow">else</span>{  
<a name="l00249"></a>00249  
<a name="l00250"></a>00250                <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QGridLayout&quot;</span>)){ 
<a name="l00251"></a>00251                } 
<a name="l00252"></a>00252             } 
<a name="l00253"></a>00253  
<a name="l00254"></a>00254             <a class="code" href="classXML2Form.html#a4302872a12a04aa016619a235698a8db">outputTree</a>(childElement, <a class="code" href="classXML2Form.html#a23039ea01dc3a50ee859e12b645774b5">layout</a>); <span class="comment">// call with the new layout </span>
<a name="l00255"></a>00255  
<a name="l00256"></a>00256          }<span class="keywordflow">else</span>{ 
<a name="l00257"></a>00257  
<a name="l00258"></a>00258             <a class="code" href="classXML2Form.html#a4302872a12a04aa016619a235698a8db">outputTree</a>(childElement, parent); <span class="comment">// call with the old layout </span>
<a name="l00259"></a>00259          } 
<a name="l00260"></a>00260       } 
<a name="l00261"></a>00261        
<a name="l00262"></a>00262    } <span class="comment">// end for </span>
<a name="l00263"></a>00263 } 
<a name="l00264"></a>00264  
<a name="l00265"></a>00265  
<a name="l00266"></a><a class="code" href="classXML2Form.html#acf926f156b8bbc9016bb271baaa9c491">00266</a> <span class="keywordtype">void</span> <a class="code" href="classXML2Form.html#acf926f156b8bbc9016bb271baaa9c491">XML2Form::parseForm</a>(QDomDocument formFile) 
<a name="l00267"></a>00267 { 
<a name="l00268"></a>00268 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;parseForm&quot;</span>, <span class="stringliteral">&quot;QDomDocument formFile&quot;</span>);
<a name="l00269"></a>00269    this-&gt;<a class="code" href="classXML2Form.html#a54e053fb4e1186a487f9bce37b9ef078">formLayout</a> = <span class="keyword">new</span> QVBoxLayout; 
<a name="l00270"></a>00270  
<a name="l00271"></a>00271    <a class="code" href="classXML2Form.html#a4302872a12a04aa016619a235698a8db">outputTree</a>(formFile, <a class="code" href="classXML2Form.html#a54e053fb4e1186a487f9bce37b9ef078">formLayout</a>); 
<a name="l00272"></a>00272    this-&gt;setLayout(this-&gt;<a class="code" href="classXML2Form.html#a54e053fb4e1186a487f9bce37b9ef078">formLayout</a>); 
<a name="l00273"></a>00273 } 
<a name="l00274"></a>00274  
<a name="l00275"></a>00275 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00276"></a>00276 <span class="comment">// Method       : handleFormField() </span>
<a name="l00277"></a>00277 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l00278"></a>00278 <span class="comment">// Description  : proceeds the forms field handling </span>
<a name="l00279"></a>00279 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00280"></a>00280  
<a name="l00281"></a><a class="code" href="classXML2Form.html#a97a812b4c01de1a025894fbbc5e1270f">00281</a> <span class="keywordtype">bool</span> <a class="code" href="classXML2Form.html#a97a812b4c01de1a025894fbbc5e1270f">XML2Form::handleFormField</a>(<span class="keyword">const</span> QDomElement&amp; childElement, QLayout* parent) 
<a name="l00282"></a>00282 { 
<a name="l00283"></a>00283 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;handleFormField&quot;</span>, <span class="stringliteral">&quot;const QDomElement&amp; childElement, QLayout* parent&quot;</span>);
<a name="l00284"></a>00284  
<a name="l00285"></a>00285    QDomElement formFieldType = childElement.firstChild().toElement(); 
<a name="l00286"></a>00286    <span class="comment">//QWidget* childWidget = 0; </span>
<a name="l00287"></a>00287    <span class="keywordtype">int</span> i_widthFactor = 20; 
<a name="l00288"></a>00288    <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>       = NULL; 
<a name="l00289"></a>00289    <a class="code" href="classXML2Form.html#ab1d32c23c4b270fd000b5e2d09272f31">grandChildWidget</a>  = NULL; 
<a name="l00290"></a>00290     
<a name="l00291"></a>00291    <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;HLine&quot;</span> ){ 
<a name="l00292"></a>00292       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a> = <span class="keyword">new</span> <a class="code" href="classLabel.html">Label</a>; 
<a name="l00293"></a>00293       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setAccessibleName(<span class="stringliteral">&quot;HLine&quot;</span>); 
<a name="l00294"></a>00294  
<a name="l00295"></a>00295       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setFrameShape(QFrame::HLine); 
<a name="l00296"></a>00296       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setFrameShadow(QFrame::Sunken); 
<a name="l00297"></a>00297       <span class="keywordtype">int</span> w = childElement.attribute(<span class="stringliteral">&quot;gridWidth&quot;</span>).toInt(); 
<a name="l00298"></a>00298       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> = w;
<a name="l00299"></a>00299        
<a name="l00300"></a>00300       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00301"></a>00301       <span class="comment">// </span>
<a name="l00302"></a>00302       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()) 
<a name="l00303"></a>00303       { 
<a name="l00304"></a>00304          <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00305"></a>00305       } 
<a name="l00306"></a>00306  
<a name="l00307"></a>00307       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>; 
<a name="l00308"></a>00308  
<a name="l00309"></a>00309       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00310"></a>00310    } 
<a name="l00311"></a>00311  
<a name="l00312"></a>00312    <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;Label&quot;</span> ){ 
<a name="l00313"></a>00313  
<a name="l00314"></a>00314       QFont buttTxtFont; 
<a name="l00315"></a>00315       buttTxtFont.setPixelSize(12); 
<a name="l00316"></a>00316       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a> = <span class="keyword">new</span> <a class="code" href="classLabel.html">Label</a>; 
<a name="l00317"></a>00317       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#a5584bf11b1059f5c48ee4ed0e074e5b3">sqlTabName</a> = childElement.attribute(<span class="stringliteral">&quot;sqlTabName&quot;</span>); 
<a name="l00318"></a>00318       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#a484912d15ccb6b509a438ded54ec4db8">colName</a>    = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00319"></a>00319       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#a9456abb423939d68c1671b796abf92d8">name</a>       = childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>); 
<a name="l00320"></a>00320       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setProperty(<span class="stringliteral">&quot;fieldId&quot;</span>, childElement.attribute(<span class="stringliteral">&quot;fieldId&quot;</span>));
<a name="l00321"></a>00321 
<a name="l00322"></a>00322       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setAccessibleName(<a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#a9456abb423939d68c1671b796abf92d8">name</a>);
<a name="l00323"></a>00323  
<a name="l00324"></a>00324       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setFont(buttTxtFont); 
<a name="l00325"></a>00325       QString labelName = childElement.attribute(<span class="stringliteral">&quot;text&quot;</span>); 
<a name="l00326"></a>00326       <span class="keywordflow">if</span>(labelName.isNull()){ 
<a name="l00327"></a>00327          labelName = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00328"></a>00328       } 
<a name="l00329"></a>00329       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setAccessibleName(labelName); 
<a name="l00330"></a>00330  
<a name="l00331"></a>00331       <span class="keywordtype">int</span> w = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00332"></a>00332       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> = w;
<a name="l00333"></a>00333  
<a name="l00334"></a>00334       <span class="comment">// faking the labels identifier, till we can read it from </span>
<a name="l00335"></a>00335       <span class="comment">// the protocol </span>
<a name="l00336"></a>00336       <span class="comment">// </span>
<a name="l00337"></a>00337       labelName.trimmed(); 
<a name="l00338"></a>00338  
<a name="l00339"></a>00339       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setText(labelName); 
<a name="l00340"></a>00340       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setMaximumWidth(w*i_widthFactor); 
<a name="l00341"></a>00341        
<a name="l00342"></a>00342       QPalette p = <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;palette(); 
<a name="l00343"></a>00343  
<a name="l00344"></a>00344       p.setColor(QPalette::Foreground, Qt::blue); 
<a name="l00345"></a>00345       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setPalette(p); 
<a name="l00346"></a>00346  
<a name="l00347"></a>00347       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00348"></a>00348       <span class="comment">// </span>
<a name="l00349"></a>00349       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00350"></a>00350          <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00351"></a>00351       } 
<a name="l00352"></a>00352  
<a name="l00353"></a>00353       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>; 
<a name="l00354"></a>00354  
<a name="l00355"></a>00355       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>; 
<a name="l00356"></a>00356  
<a name="l00357"></a>00357       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00358"></a>00358  
<a name="l00359"></a>00359    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;Edit&quot;</span>){ 
<a name="l00360"></a>00360  
<a name="l00361"></a>00361       <a class="code" href="classEdit.html">Edit</a> *lineEdit = <span class="keyword">new</span> <a class="code" href="classEdit.html">Edit</a>; 
<a name="l00362"></a>00362       lineEdit-&gt;setProperty(<span class="stringliteral">&quot;style&quot;</span>, formFieldType.attribute(<span class="stringliteral">&quot;style&quot;</span>));
<a name="l00363"></a>00363       lineEdit-&gt;setProperty(<span class="stringliteral">&quot;fieldId&quot;</span>, childElement.attribute(<span class="stringliteral">&quot;fieldId&quot;</span>));
<a name="l00364"></a>00364       lineEdit-&gt;setAccessibleName(childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>)); 
<a name="l00365"></a>00365       lineEdit-&gt;<a class="code" href="classLineEdit.html#ac7a4f4fcd5b7f40f66c47ff64d66f7ec">sqlTabName</a> = childElement.attribute(<span class="stringliteral">&quot;sqlTabName&quot;</span>); 
<a name="l00366"></a>00366       lineEdit-&gt;<a class="code" href="classLineEdit.html#a18b45b2581575cf88489ab3a6f15281f">colName</a>    = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00367"></a>00367       lineEdit-&gt;<a class="code" href="classLineEdit.html#a337f64c9e882f065b5771f9e2289784f">name</a>       = childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>); 
<a name="l00368"></a>00368  
<a name="l00369"></a>00369 <span class="comment">//    int isScrollable = formFieldType.attribute(&quot;scroll&quot;).toInt(); </span>
<a name="l00370"></a>00370       <span class="keywordtype">int</span> w            = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00371"></a>00371       <span class="keywordtype">int</span> i_noEntry    = childElement.attribute(<span class="stringliteral">&quot;noEntry&quot;</span>).toInt(); 
<a name="l00372"></a>00372  
<a name="l00373"></a>00373       QString qs_sqlType =  childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>); 
<a name="l00374"></a>00374       lineEdit-&gt;<a class="code" href="classLineEdit.html#a8c0cb7cb1a2b0738db17ab3fad4b251b">setSqlType</a>(qs_sqlType);
<a name="l00375"></a>00375       <span class="keywordtype">int</span> i_inputLength = <a class="code" href="classXML2Form.html#ae1ab9e5e978954651c10800d4dd16b89">getLengthBySqlType</a>(qs_sqlType); 
<a name="l00376"></a>00376  
<a name="l00377"></a>00377       lineEdit-&gt;setFixedWidth((i_inputLength+10)*5); 
<a name="l00378"></a>00378  
<a name="l00379"></a>00379       <span class="keywordflow">if</span>(i_noEntry){ 
<a name="l00380"></a>00380          lineEdit-&gt;setReadOnly(<span class="keyword">true</span>); 
<a name="l00381"></a>00381       }<span class="keywordflow">else</span>{ 
<a name="l00382"></a>00382          lineEdit-&gt;setReadOnly(<span class="keyword">false</span>); 
<a name="l00383"></a>00383       } 
<a name="l00384"></a>00384  
<a name="l00385"></a>00385       <span class="comment">// create a regular expression depending on the  </span>
<a name="l00386"></a>00386       <span class="comment">// datatype of the field wich is represented by the </span>
<a name="l00387"></a>00387       <span class="comment">// elements attribute &quot;sqlType&quot;.  </span>
<a name="l00388"></a>00388       <span class="comment">// </span>
<a name="l00389"></a>00389       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>)==<span class="stringliteral">&quot;INTEGER&quot;</span> || 
<a name="l00390"></a>00390           childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>)==<span class="stringliteral">&quot;SMALLINT&quot;</span>) 
<a name="l00391"></a>00391       { 
<a name="l00392"></a>00392          QString valiRange;      
<a name="l00393"></a>00393          QString exprStr;      
<a name="l00394"></a>00394          QString range; 
<a name="l00395"></a>00395          range.setNum(w); 
<a name="l00396"></a>00396  
<a name="l00397"></a>00397          exprStr = <span class="stringliteral">&quot;^[0-9]{1,&quot;</span>; 
<a name="l00398"></a>00398          exprStr.append(range); 
<a name="l00399"></a>00399          exprStr.append(<span class="stringliteral">&quot;}$&quot;</span>); 
<a name="l00400"></a>00400  
<a name="l00401"></a>00401          QRegExp regExp(exprStr); 
<a name="l00402"></a>00402          QRegExpValidator *validator = <span class="keyword">new</span> QRegExpValidator(regExp, lineEdit); 
<a name="l00403"></a>00403          lineEdit-&gt;setValidator(validator); 
<a name="l00404"></a>00404  
<a name="l00405"></a>00405       }<span class="keywordflow">else</span>{ 
<a name="l00406"></a>00406      
<a name="l00407"></a>00407  
<a name="l00408"></a>00408          QString valiRange;      
<a name="l00409"></a>00409          QString exprStr;      
<a name="l00410"></a>00410          QString range; 
<a name="l00411"></a>00411          range.setNum(w); 
<a name="l00412"></a>00412  
<a name="l00413"></a>00413          exprStr = <span class="stringliteral">&quot;.{1,&quot;</span>; 
<a name="l00414"></a>00414          exprStr.append(range); 
<a name="l00415"></a>00415          exprStr.append(<span class="stringliteral">&quot;}$&quot;</span>); 
<a name="l00416"></a>00416          exprStr.append(range); 
<a name="l00417"></a>00417  
<a name="l00418"></a>00418          QRegExp regExp(exprStr); 
<a name="l00419"></a>00419          QRegExpValidator *validator = <span class="keyword">new</span> QRegExpValidator(regExp, lineEdit); 
<a name="l00420"></a>00420           
<a name="l00421"></a>00421          <span class="keywordflow">if</span>(i_inputLength==0){ 
<a name="l00422"></a>00422             lineEdit-&gt;setMaxLength(w); 
<a name="l00423"></a>00423          }<span class="keywordflow">else</span>{ 
<a name="l00424"></a>00424             lineEdit-&gt;setMaxLength(i_inputLength); 
<a name="l00425"></a>00425          } 
<a name="l00426"></a>00426          
<a name="l00427"></a>00427          <span class="keywordflow">if</span>(formFieldType.attribute(<span class="stringliteral">&quot;shift&quot;</span>)==<span class="stringliteral">&quot;up&quot;</span>){ 
<a name="l00428"></a>00428     
<a name="l00429"></a>00429             <a class="code" href="classmyValidatorToUpper.html">myValidatorToUpper</a> *validator =  
<a name="l00430"></a>00430                                 <span class="keyword">new</span> <a class="code" href="classmyValidatorToUpper.html">myValidatorToUpper</a>(regExp, lineEdit); 
<a name="l00431"></a>00431  
<a name="l00432"></a>00432             lineEdit-&gt;setMaxLength(w); 
<a name="l00433"></a>00433             lineEdit-&gt;setValidator(validator); 
<a name="l00434"></a>00434          }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.attribute(<span class="stringliteral">&quot;shift&quot;</span>)==<span class="stringliteral">&quot;down&quot;</span>){ 
<a name="l00435"></a>00435    
<a name="l00436"></a>00436             <a class="code" href="classmyValidatorToLower.html">myValidatorToLower</a> *validator =  
<a name="l00437"></a>00437                                 <span class="keyword">new</span> <a class="code" href="classmyValidatorToLower.html">myValidatorToLower</a>(regExp, lineEdit); 
<a name="l00438"></a>00438  
<a name="l00439"></a>00439             lineEdit-&gt;setMaxLength(w); 
<a name="l00440"></a>00440             lineEdit-&gt;setValidator(validator); 
<a name="l00441"></a>00441  
<a name="l00442"></a>00442          }<span class="keywordflow">else</span>{ 
<a name="l00443"></a>00443   
<a name="l00444"></a>00444             QRegExpValidator *validator =  
<a name="l00445"></a>00445                               <span class="keyword">new</span> QRegExpValidator(regExp, lineEdit); 
<a name="l00446"></a>00446  
<a name="l00447"></a>00447             lineEdit-&gt;setValidator(validator); 
<a name="l00448"></a>00448          } 
<a name="l00449"></a>00449       } 
<a name="l00450"></a>00450  
<a name="l00451"></a>00451       lineEdit-&gt;clear(); 
<a name="l00452"></a>00452       lineEdit-&gt;setEnabled(<span class="keyword">false</span>); 
<a name="l00453"></a>00453  
<a name="l00454"></a>00454       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00455"></a>00455       <span class="comment">// </span>
<a name="l00456"></a>00456       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00457"></a>00457          lineEdit-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00458"></a>00458       } 
<a name="l00459"></a>00459  
<a name="l00460"></a>00460       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = lineEdit; 
<a name="l00461"></a>00461  
<a name="l00462"></a>00462       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; lineEdit; 
<a name="l00463"></a>00463       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00464"></a>00464  
<a name="l00465"></a>00465    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;Image&quot;</span>){ 
<a name="l00466"></a>00466         
<a name="l00467"></a>00467       QPixmap *image = <span class="keyword">new</span> QPixmap(<span class="stringliteral">&quot;pics/ventas.png&quot;</span>); 
<a name="l00468"></a>00468       QLabel *imageLabel = <span class="keyword">new</span> QLabel; 
<a name="l00469"></a>00469       imageLabel-&gt;setFocusPolicy(Qt::NoFocus);
<a name="l00470"></a>00470  
<a name="l00471"></a>00471       <span class="keywordtype">int</span> x = formFieldType.attribute(<span class="stringliteral">&quot;posX&quot;</span>).toInt(); 
<a name="l00472"></a>00472       <span class="keywordtype">int</span> y = formFieldType.attribute(<span class="stringliteral">&quot;posY&quot;</span>).toInt(); 
<a name="l00473"></a>00473       <span class="keywordtype">int</span> w = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00474"></a>00474  
<a name="l00475"></a>00475       imageLabel-&gt;setPixmap(*image); 
<a name="l00476"></a>00476  
<a name="l00477"></a>00477       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00478"></a>00478       <span class="comment">// </span>
<a name="l00479"></a>00479       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00480"></a>00480          imageLabel-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00481"></a>00481       } 
<a name="l00482"></a>00482  
<a name="l00483"></a>00483       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = imageLabel; 
<a name="l00484"></a>00484  
<a name="l00485"></a>00485       QGridLayout* gridLayout = (QGridLayout*)parent; 
<a name="l00486"></a>00486       gridLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>, y, x); 
<a name="l00487"></a>00487  
<a name="l00488"></a>00488       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = NULL; 
<a name="l00489"></a>00489  
<a name="l00490"></a>00490       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; imageLabel; 
<a name="l00491"></a>00491       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00492"></a>00492  
<a name="l00493"></a>00493    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;Browser&quot;</span>){ 
<a name="l00494"></a>00494       <a class="code" href="classWebView.html">WebView</a> *view = <span class="keyword">new</span> <a class="code" href="classWebView.html">WebView</a>;
<a name="l00495"></a>00495       view-&gt;<a class="code" href="classWebView.html#a2a624574a472c48cbdc410410036f757">colName</a>    = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00496"></a>00496       view-&gt;<a class="code" href="classWebView.html#aca02a652e2c58e81ea858ed288e4e187">name</a>       = childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>); 
<a name="l00497"></a>00497       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = view;
<a name="l00498"></a>00498       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; view; 
<a name="l00499"></a>00499       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00500"></a>00500    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;ButtonEdit&quot;</span>){ 
<a name="l00501"></a>00501  
<a name="l00502"></a>00502       QString iconFileName = formFieldType.attribute(<span class="stringliteral">&quot;image&quot;</span>);
<a name="l00503"></a>00503       QString buttonKey = formFieldType.attribute(<span class="stringliteral">&quot;action&quot;</span>); 
<a name="l00504"></a>00504  
<a name="l00505"></a>00505       <a class="code" href="classButtonEdit.html">ButtonEdit</a> *lineEdit = <span class="keyword">new</span> <a class="code" href="classButtonEdit.html">ButtonEdit</a>(iconFileName); 
<a name="l00506"></a>00506       lineEdit-&gt;setProperty(<span class="stringliteral">&quot;style&quot;</span>, formFieldType.attribute(<span class="stringliteral">&quot;style&quot;</span>));
<a name="l00507"></a>00507       lineEdit-&gt;setProperty(<span class="stringliteral">&quot;fieldId&quot;</span>, childElement.attribute(<span class="stringliteral">&quot;fieldId&quot;</span>));
<a name="l00508"></a>00508       lineEdit-&gt;<a class="code" href="classLineEdit.html#ac7a4f4fcd5b7f40f66c47ff64d66f7ec">sqlTabName</a> = childElement.attribute(<span class="stringliteral">&quot;sqlTabName&quot;</span>); 
<a name="l00509"></a>00509       lineEdit-&gt;<a class="code" href="classLineEdit.html#a18b45b2581575cf88489ab3a6f15281f">colName</a>    = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00510"></a>00510       lineEdit-&gt;<a class="code" href="classLineEdit.html#a337f64c9e882f065b5771f9e2289784f">name</a>       = childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>); 
<a name="l00511"></a>00511  
<a name="l00512"></a>00512       lineEdit-&gt;<a class="code" href="classButtonEdit.html#a5d38b77fee50b8052338542e1ae568a9">setButtonKey</a>(buttonKey);
<a name="l00513"></a>00513       lineEdit-&gt;setAccessibleName(childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>)); 
<a name="l00514"></a>00514       QList&lt;QPushButton *&gt; list = lineEdit-&gt;findChildren&lt;QPushButton *&gt;(); 
<a name="l00515"></a>00515       <span class="keywordflow">if</span>(!list.isEmpty()){
<a name="l00516"></a>00516          QPushButton *editButton = list.first(); 
<a name="l00517"></a>00517          editButton-&gt;setFixedWidth(i_widthFactor); 
<a name="l00518"></a>00518          editButton-&gt;setFixedHeight(i_widthFactor); 
<a name="l00519"></a>00519       }
<a name="l00520"></a>00520  
<a name="l00521"></a>00521       <span class="comment">// width for buttonEdit has to be reduced by 6 </span>
<a name="l00522"></a>00522       <span class="comment">// because the button size is already included </span>
<a name="l00523"></a>00523       <span class="comment">// </span>
<a name="l00524"></a>00524       <span class="keywordtype">int</span> w = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt()-2; 
<a name="l00525"></a>00525       QString qs_sqlType =  childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>); 
<a name="l00526"></a>00526       lineEdit-&gt;<a class="code" href="classLineEdit.html#a8c0cb7cb1a2b0738db17ab3fad4b251b">setSqlType</a>(qs_sqlType);
<a name="l00527"></a>00527       <span class="keywordtype">int</span> i_inputLength = <a class="code" href="classXML2Form.html#ae1ab9e5e978954651c10800d4dd16b89">getLengthBySqlType</a>(qs_sqlType); 
<a name="l00528"></a>00528       lineEdit-&gt;setFixedWidth((i_inputLength+10)*5); 
<a name="l00529"></a>00529  
<a name="l00530"></a>00530       <span class="comment">// create a regular expression depending on the  </span>
<a name="l00531"></a>00531       <span class="comment">// datatype of the field wich is represented by the </span>
<a name="l00532"></a>00532       <span class="comment">// elements attribute &quot;sqlType&quot;.  </span>
<a name="l00533"></a>00533       <span class="comment">// </span>
<a name="l00534"></a>00534       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>)==<span class="stringliteral">&quot;INTEGER&quot;</span> || 
<a name="l00535"></a>00535          childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>)==<span class="stringliteral">&quot;SMALLINT&quot;</span>) 
<a name="l00536"></a>00536       { 
<a name="l00537"></a>00537          QString valiRange;      
<a name="l00538"></a>00538          QString exprStr;      
<a name="l00539"></a>00539          QString range; 
<a name="l00540"></a>00540          range.setNum(w); 
<a name="l00541"></a>00541  
<a name="l00542"></a>00542          exprStr = <span class="stringliteral">&quot;^[0-9]{1,&quot;</span>; 
<a name="l00543"></a>00543          exprStr.append(range); 
<a name="l00544"></a>00544          exprStr.append(<span class="stringliteral">&quot;}$&quot;</span>); 
<a name="l00545"></a>00545  
<a name="l00546"></a>00546          QRegExp regExp(exprStr); 
<a name="l00547"></a>00547          QRegExpValidator *validator = <span class="keyword">new</span> QRegExpValidator(regExp, lineEdit); 
<a name="l00548"></a>00548          lineEdit-&gt;setValidator(validator); 
<a name="l00549"></a>00549          lineEdit-&gt;setValidator(validator); 
<a name="l00550"></a>00550  
<a name="l00551"></a>00551       }<span class="keywordflow">else</span>{ 
<a name="l00552"></a>00552  
<a name="l00553"></a>00553          QString valiRange;      
<a name="l00554"></a>00554          QString exprStr;      
<a name="l00555"></a>00555          QString range; 
<a name="l00556"></a>00556          range.setNum(w); 
<a name="l00557"></a>00557  
<a name="l00558"></a>00558          exprStr = <span class="stringliteral">&quot;^[A-Za-z0-9]{1,&quot;</span>; 
<a name="l00559"></a>00559          exprStr.append(range); 
<a name="l00560"></a>00560          exprStr.append(<span class="stringliteral">&quot;}$&quot;</span>); 
<a name="l00561"></a>00561  
<a name="l00562"></a>00562          QRegExp regExp(exprStr); 
<a name="l00563"></a>00563  
<a name="l00564"></a>00564          <span class="keywordflow">if</span>(i_inputLength==0){ 
<a name="l00565"></a>00565             lineEdit-&gt;setMaxLength(w); 
<a name="l00566"></a>00566          }<span class="keywordflow">else</span>{ 
<a name="l00567"></a>00567             lineEdit-&gt;setMaxLength(i_inputLength); 
<a name="l00568"></a>00568          } 
<a name="l00569"></a>00569  
<a name="l00570"></a>00570  
<a name="l00571"></a>00571          <span class="keywordflow">if</span>(formFieldType.attribute(<span class="stringliteral">&quot;shift&quot;</span>)==<span class="stringliteral">&quot;up&quot;</span>){ 
<a name="l00572"></a>00572             <a class="code" href="classmyValidatorToUpper.html">myValidatorToUpper</a> *validator = <span class="keyword">new</span> <a class="code" href="classmyValidatorToUpper.html">myValidatorToUpper</a>(regExp, lineEdit); 
<a name="l00573"></a>00573             lineEdit-&gt;setValidator(validator); 
<a name="l00574"></a>00574          }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.attribute(<span class="stringliteral">&quot;shift&quot;</span>)==<span class="stringliteral">&quot;down&quot;</span>){ 
<a name="l00575"></a>00575             <a class="code" href="classmyValidatorToLower.html">myValidatorToLower</a> *validator = <span class="keyword">new</span> <a class="code" href="classmyValidatorToLower.html">myValidatorToLower</a>(regExp, lineEdit); 
<a name="l00576"></a>00576             lineEdit-&gt;setValidator(validator); 
<a name="l00577"></a>00577          }<span class="keywordflow">else</span>{ 
<a name="l00578"></a>00578             QRegExpValidator *validator = <span class="keyword">new</span> QRegExpValidator(regExp, lineEdit); 
<a name="l00579"></a>00579             lineEdit-&gt;setValidator(validator); 
<a name="l00580"></a>00580          } 
<a name="l00581"></a>00581       } 
<a name="l00582"></a>00582  
<a name="l00583"></a>00583       lineEdit-&gt;clear(); 
<a name="l00584"></a>00584       lineEdit-&gt;setCursorPosition(1); 
<a name="l00585"></a>00585  
<a name="l00586"></a>00586       <span class="comment">// if attribute is hidden - we hide these widgets on the layout </span>
<a name="l00587"></a>00587       <span class="comment">// </span>
<a name="l00588"></a>00588       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00589"></a>00589          lineEdit-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00590"></a>00590       } 
<a name="l00591"></a>00591  
<a name="l00592"></a>00592       lineEdit-&gt;setEnabled(<span class="keyword">false</span>); 
<a name="l00593"></a>00593  
<a name="l00594"></a>00594       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = lineEdit; 
<a name="l00595"></a>00595  
<a name="l00596"></a>00596       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; lineEdit; 
<a name="l00597"></a>00597  
<a name="l00598"></a>00598       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00599"></a>00599  
<a name="l00600"></a>00600    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;RipBMP&quot;</span>){ 
<a name="l00601"></a>00601       <span class="comment">// we don&#39;t need them, but somethimes these nodes  </span>
<a name="l00602"></a>00602       <span class="comment">// apears in the xmlform </span>
<a name="l00603"></a>00603       <span class="comment">//p_currForm-&gt;i_cntXMLFields++; </span>
<a name="l00604"></a>00604       <span class="comment">//i_cntFields++; </span>
<a name="l00605"></a>00605 
<a name="l00606"></a>00606    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;RipCHECK&quot;</span>){ 
<a name="l00607"></a>00607       <a class="code" href="classCheckBox.html">CheckBox</a> *checkBox = <span class="keyword">new</span> <a class="code" href="classCheckBox.html">CheckBox</a>;
<a name="l00608"></a>00608       QString config = formFieldType.attribute(<span class="stringliteral">&quot;config&quot;</span>);
<a name="l00609"></a>00609       <span class="keywordtype">int</span> width = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt();
<a name="l00610"></a>00610       <span class="keywordtype">bool</span> autoNext = formFieldType.attribute(<span class="stringliteral">&quot;autoNext&quot;</span>).toInt();
<a name="l00611"></a>00611 
<a name="l00612"></a>00612       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = checkBox;
<a name="l00613"></a>00613       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; checkBox; 
<a name="l00614"></a>00614  
<a name="l00615"></a>00615    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;ComboBox&quot;</span>){ 
<a name="l00616"></a>00616  
<a name="l00617"></a>00617    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;ComboBox&quot;</span>){ 
<a name="l00618"></a>00618  
<a name="l00619"></a>00619       QComboBox *comboBox = <span class="keyword">new</span> QComboBox; 
<a name="l00620"></a>00620  
<a name="l00621"></a>00621       <span class="keywordtype">int</span> w = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00622"></a>00622  
<a name="l00623"></a>00623       comboBox-&gt;setMaximumWidth(w*i_widthFactor); 
<a name="l00624"></a>00624       comboBox-&gt;setEditable(<span class="keyword">false</span>); 
<a name="l00625"></a>00625  
<a name="l00626"></a>00626       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00627"></a>00627       <span class="comment">// </span>
<a name="l00628"></a>00628       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00629"></a>00629          comboBox-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00630"></a>00630       } 
<a name="l00631"></a>00631       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = comboBox; 
<a name="l00632"></a>00632  
<a name="l00633"></a>00633       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00634"></a>00634                           
<a name="l00635"></a>00635    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;DateEdit&quot;</span>){ 
<a name="l00636"></a>00636  
<a name="l00637"></a>00637       <a class="code" href="classDateEdit.html">DateEdit</a> *dateEdit =  <span class="keyword">new</span> <a class="code" href="classDateEdit.html">DateEdit</a>(); 
<a name="l00638"></a>00638       dateEdit-&gt;setProperty(<span class="stringliteral">&quot;fieldId&quot;</span>, childElement.attribute(<span class="stringliteral">&quot;fieldId&quot;</span>));
<a name="l00639"></a>00639       dateEdit-&gt;setProperty(<span class="stringliteral">&quot;style&quot;</span>, formFieldType.attribute(<span class="stringliteral">&quot;style&quot;</span>));
<a name="l00640"></a>00640       dateEdit-&gt;<a class="code" href="classLineEdit.html#ac7a4f4fcd5b7f40f66c47ff64d66f7ec">sqlTabName</a> = childElement.attribute(<span class="stringliteral">&quot;sqlTabName&quot;</span>); 
<a name="l00641"></a>00641       dateEdit-&gt;<a class="code" href="classLineEdit.html#a18b45b2581575cf88489ab3a6f15281f">colName</a>    = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00642"></a>00642       dateEdit-&gt;<a class="code" href="classLineEdit.html#a337f64c9e882f065b5771f9e2289784f">name</a>       = childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>); 
<a name="l00643"></a>00643  
<a name="l00644"></a>00644       dateEdit-&gt;setAccessibleName(childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>)); 
<a name="l00645"></a>00645       QDate date; 
<a name="l00646"></a>00646  
<a name="l00647"></a>00647       QString qs_sqlType =  childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>); 
<a name="l00648"></a>00648       dateEdit-&gt;<a class="code" href="classLineEdit.html#a8c0cb7cb1a2b0738db17ab3fad4b251b">setSqlType</a>(qs_sqlType);
<a name="l00649"></a>00649  
<a name="l00650"></a>00650       <span class="keywordtype">int</span> w = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00651"></a>00651       <span class="keywordtype">int</span> i_noEntry  = childElement.attribute(<span class="stringliteral">&quot;noEntry&quot;</span>).toInt(); 
<a name="l00652"></a>00652  
<a name="l00653"></a>00653       <span class="keywordflow">if</span>(i_noEntry){ 
<a name="l00654"></a>00654          dateEdit-&gt;setReadOnly(<span class="keyword">true</span>); 
<a name="l00655"></a>00655       }<span class="keywordflow">else</span>{ 
<a name="l00656"></a>00656          dateEdit-&gt;setReadOnly(<span class="keyword">false</span>); 
<a name="l00657"></a>00657       } 
<a name="l00658"></a>00658  
<a name="l00659"></a>00659       date = QDate::currentDate(); 
<a name="l00660"></a>00660  
<a name="l00661"></a>00661       QString valiRange;      
<a name="l00662"></a>00662       QString exprStr;      
<a name="l00663"></a>00663  
<a name="l00664"></a>00664       exprStr = <span class="stringliteral">&quot;[0-9.]*&quot;</span>; 
<a name="l00665"></a>00665       exprStr.append(<span class="stringliteral">&quot;$&quot;</span>); 
<a name="l00666"></a>00666       QRegExp regExp(exprStr); 
<a name="l00667"></a>00667       QRegExpValidator *validator = <span class="keyword">new</span> QRegExpValidator(regExp, dateEdit); 
<a name="l00668"></a>00668       dateEdit-&gt;setFixedWidth(5*i_widthFactor); 
<a name="l00669"></a>00669  
<a name="l00670"></a>00670       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00671"></a>00671       <span class="comment">// </span>
<a name="l00672"></a>00672       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00673"></a>00673          dateEdit-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00674"></a>00674       } 
<a name="l00675"></a>00675  
<a name="l00676"></a>00676       QList&lt;QPushButton *&gt; list = dateEdit-&gt;findChildren&lt;QPushButton *&gt;(); 
<a name="l00677"></a>00677       QPushButton *editButton = list.first(); 
<a name="l00678"></a>00678  
<a name="l00679"></a>00679       dateEdit-&gt;setEnabled(<span class="keyword">false</span>); 
<a name="l00680"></a>00680  
<a name="l00681"></a>00681       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = dateEdit; 
<a name="l00682"></a>00682  
<a name="l00683"></a>00683       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; dateEdit; 
<a name="l00684"></a>00684       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00685"></a>00685  
<a name="l00686"></a>00686    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;TextEdit&quot;</span>){ 
<a name="l00687"></a>00687  
<a name="l00688"></a>00688       <a class="code" href="classTextEdit.html">TextEdit</a> *textEdit = <span class="keyword">new</span> <a class="code" href="classTextEdit.html">TextEdit</a>; 
<a name="l00689"></a>00689       textEdit-&gt;setProperty(<span class="stringliteral">&quot;style&quot;</span>, formFieldType.attribute(<span class="stringliteral">&quot;style&quot;</span>));
<a name="l00690"></a>00690       textEdit-&gt;setProperty(<span class="stringliteral">&quot;fieldId&quot;</span>, childElement.attribute(<span class="stringliteral">&quot;fieldId&quot;</span>));
<a name="l00691"></a>00691  
<a name="l00692"></a>00692       <span class="keywordtype">int</span> i_wantReturns = formFieldType.attribute(<span class="stringliteral">&quot;wantReturns&quot;</span>).toInt(); 
<a name="l00693"></a>00693       <span class="keywordtype">int</span> i_wantTabs    = formFieldType.attribute(<span class="stringliteral">&quot;wantTabs&quot;</span>).toInt(); 
<a name="l00694"></a>00694       <span class="keywordtype">int</span> w             = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00695"></a>00695       <span class="keywordtype">int</span> h             = formFieldType.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt(); 
<a name="l00696"></a>00696  
<a name="l00697"></a>00697       textEdit-&gt;<a class="code" href="classTextEdit.html#a3701b552998825c3eef0a125f3dfdd43">name</a> = childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>); 
<a name="l00698"></a>00698       textEdit-&gt;<a class="code" href="classTextEdit.html#afa84afb50eea1aee08fe4ae71bb4239e">colName</a> = childElement.attribute(<span class="stringliteral">&quot;colName&quot;</span>); 
<a name="l00699"></a>00699  
<a name="l00700"></a>00700       <span class="comment">// tabulators can be used in the textedit to format text </span>
<a name="l00701"></a>00701       <span class="comment">// </span>
<a name="l00702"></a>00702       <span class="keywordflow">if</span>(i_wantTabs) 
<a name="l00703"></a>00703          textEdit-&gt;setTabChangesFocus(<span class="keyword">false</span>); 
<a name="l00704"></a>00704       <span class="keywordflow">else</span> 
<a name="l00705"></a>00705          textEdit-&gt;setTabChangesFocus(<span class="keyword">true</span>); 
<a name="l00706"></a>00706  
<a name="l00707"></a>00707       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00708"></a>00708       <span class="comment">// </span>
<a name="l00709"></a>00709       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00710"></a>00710          textEdit-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00711"></a>00711       } 
<a name="l00712"></a>00712  
<a name="l00713"></a>00713       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = textEdit; 
<a name="l00714"></a>00714  
<a name="l00715"></a>00715       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; textEdit; 
<a name="l00716"></a>00716       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00717"></a>00717  
<a name="l00718"></a>00718  
<a name="l00719"></a>00719       <span class="comment">// exception for textedits in matrix - when more then 1 textEditLine we  </span>
<a name="l00720"></a>00720       <span class="comment">// have to alter the field counter.   #jobnr: 18042 </span>
<a name="l00721"></a>00721       <span class="keywordflow">if</span>(childElement.nodeName()==<span class="stringliteral">&quot;Matrix&quot;</span>) 
<a name="l00722"></a>00722       { 
<a name="l00723"></a>00723          <a class="code" href="classLineEdit.html">LineEdit</a> *le = <span class="keyword">new</span> <a class="code" href="classLineEdit.html">LineEdit</a>; 
<a name="l00724"></a>00724  
<a name="l00725"></a>00725          QString qs_sqlType =  childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>); 
<a name="l00726"></a>00726          le-&gt;<a class="code" href="classLineEdit.html#a8c0cb7cb1a2b0738db17ab3fad4b251b">setSqlType</a>(qs_sqlType);
<a name="l00727"></a>00727          le-&gt;setAccessibleName(childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>)); 
<a name="l00728"></a>00728          QSize widgetSize; 
<a name="l00729"></a>00729          widgetSize = le-&gt;sizeHint(); 
<a name="l00730"></a>00730          <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>-&gt;setFixedHeight(widgetSize.height() * 
<a name="l00731"></a>00731          childElement.attribute(<span class="stringliteral">&quot;pageSize&quot;</span>).toInt()); 
<a name="l00732"></a>00732       }<span class="keywordflow">else</span>{ 
<a name="l00733"></a>00733  
<a name="l00734"></a>00734          <span class="comment">//when textedit is inside a formfield the the height holds </span>
<a name="l00735"></a>00735          <span class="comment">//the number of lines. </span>
<a name="l00736"></a>00736          <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;formFieldType.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt(); i++){ 
<a name="l00737"></a>00737             <span class="comment">//p_currForm-&gt;i_cntXMLFields++; </span>
<a name="l00738"></a>00738             <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00739"></a>00739          } 
<a name="l00740"></a>00740  
<a name="l00741"></a>00741          <a class="code" href="classLineEdit.html">LineEdit</a> *le = <span class="keyword">new</span> <a class="code" href="classLineEdit.html">LineEdit</a>; 
<a name="l00742"></a>00742          le-&gt;setAccessibleName(childElement.attribute(<span class="stringliteral">&quot;name&quot;</span>)); 
<a name="l00743"></a>00743  
<a name="l00744"></a>00744          QSize widgetSize; 
<a name="l00745"></a>00745          widgetSize = le-&gt;sizeHint(); 
<a name="l00746"></a>00746          <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>-&gt;setFixedHeight(widgetSize.height() * 
<a name="l00747"></a>00747          formFieldType.attribute(<span class="stringliteral">&quot;height&quot;</span>).toInt()); 
<a name="l00748"></a>00748       } 
<a name="l00749"></a>00749  
<a name="l00750"></a>00750    }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(formFieldType.nodeName() == <span class="stringliteral">&quot;ProgressBar&quot;</span>){ 
<a name="l00751"></a>00751  
<a name="l00752"></a>00752       QProgressBar *progressBar = <span class="keyword">new</span> QProgressBar; 
<a name="l00753"></a>00753       <span class="keywordtype">int</span> min = formFieldType.attribute(<span class="stringliteral">&quot;valueMin&quot;</span>).toInt(); 
<a name="l00754"></a>00754       <span class="keywordtype">int</span> max = formFieldType.attribute(<span class="stringliteral">&quot;valueMax&quot;</span>).toInt(); 
<a name="l00755"></a>00755  
<a name="l00756"></a>00756       progressBar-&gt;setRange(min,max); 
<a name="l00757"></a>00757       progressBar-&gt;setValue(max/3); 
<a name="l00758"></a>00758  
<a name="l00759"></a>00759       <span class="comment">// if attribute is hidden - we hide this widget on the layout </span>
<a name="l00760"></a>00760       <span class="comment">// </span>
<a name="l00761"></a>00761       <span class="keywordflow">if</span>(childElement.attribute(<span class="stringliteral">&quot;hidden&quot;</span>).toInt()){ 
<a name="l00762"></a>00762          progressBar-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00763"></a>00763       } 
<a name="l00764"></a>00764  
<a name="l00765"></a>00765       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = progressBar; 
<a name="l00766"></a>00766    } 
<a name="l00767"></a>00767  
<a name="l00768"></a>00768    <span class="comment">// if widget is valid prepare to add it to the layout </span>
<a name="l00769"></a>00769    <span class="comment">// </span>
<a name="l00770"></a>00770    <span class="keywordflow">if</span>(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>) 
<a name="l00771"></a>00771    { 
<a name="l00772"></a>00772       <span class="keywordtype">int</span> i_noEntry  = childElement.attribute(<span class="stringliteral">&quot;noEntry&quot;</span>).toInt(); 
<a name="l00773"></a>00773       <span class="keywordtype">int</span> x          = formFieldType.attribute(<span class="stringliteral">&quot;posX&quot;</span>).toInt(); 
<a name="l00774"></a>00774       <span class="keywordtype">int</span> y          = formFieldType.attribute(<span class="stringliteral">&quot;posY&quot;</span>).toInt(); 
<a name="l00775"></a>00775       <span class="keywordtype">int</span> w          = formFieldType.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt(); 
<a name="l00776"></a>00776  
<a name="l00777"></a>00777       <span class="keywordflow">if</span>(i_noEntry){ 
<a name="l00778"></a>00778          <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>-&gt;setFocusPolicy(Qt::NoFocus); 
<a name="l00779"></a>00779       } 
<a name="l00780"></a>00780  
<a name="l00781"></a>00781       <span class="comment">// get the current color palette object for this </span>
<a name="l00782"></a>00782       <span class="comment">// widget </span>
<a name="l00783"></a>00783       <span class="comment">// </span>
<a name="l00784"></a>00784       QPalette p = <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>-&gt;palette(); 
<a name="l00785"></a>00785       
<a name="l00786"></a>00786       <span class="comment">// switch the palettes base color to that value </span>
<a name="l00787"></a>00787       <span class="comment">// wich was detected in the consturctor of this object </span>
<a name="l00788"></a>00788       <span class="comment">// </span>
<a name="l00789"></a>00789       p.setColor(QPalette::Disabled, QPalette::Base, <a class="code" href="classXML2Form.html#aaf96ae45cb0c2c4c58e9e6d86385c0c4">qcol_BaseColor</a>); 
<a name="l00790"></a>00790  
<a name="l00791"></a>00791       <span class="comment">// now set the switched palette to the widget </span>
<a name="l00792"></a>00792       <span class="comment">// </span>
<a name="l00793"></a>00793       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>-&gt;setPalette(p); 
<a name="l00794"></a>00794  
<a name="l00795"></a>00795       <span class="comment">// now adding the widget to the relevant layout </span>
<a name="l00796"></a>00796       <span class="comment">// </span>
<a name="l00797"></a>00797       <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QBoxLayout&quot;</span>)){ 
<a name="l00798"></a>00798          QBoxLayout* boxLayout = (QBoxLayout*)parent; 
<a name="l00799"></a>00799          boxLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>); 
<a name="l00800"></a>00800  
<a name="l00801"></a>00801       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QGridLayout&quot;</span>)){ 
<a name="l00802"></a>00802  
<a name="l00803"></a>00803          <span class="comment">// exception for HLine seperators. </span>
<a name="l00804"></a>00804          <span class="comment">// position data is stored in the childElement because </span>
<a name="l00805"></a>00805          <span class="comment">// because HLine comes without a formFieldType node. </span>
<a name="l00806"></a>00806          <span class="comment">// so we simple overwrite  the x, y and w value </span>
<a name="l00807"></a>00807          <span class="comment">// </span>
<a name="l00808"></a>00808          <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;HLine&quot;</span> ){ 
<a name="l00809"></a>00809             x = childElement.attribute(<span class="stringliteral">&quot;posX&quot;</span>).toInt(); 
<a name="l00810"></a>00810             y = childElement.attribute(<span class="stringliteral">&quot;posY&quot;</span>).toInt(); 
<a name="l00811"></a>00811             w = childElement.attribute(<span class="stringliteral">&quot;gridWidth&quot;</span>).toInt(); 
<a name="l00812"></a>00812          } 
<a name="l00813"></a>00813          QString qs_sqlType =  childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>); 
<a name="l00814"></a>00814          <span class="keywordtype">int</span> i_inputLength = <a class="code" href="classXML2Form.html#ae1ab9e5e978954651c10800d4dd16b89">getLengthBySqlType</a>(qs_sqlType); 
<a name="l00815"></a>00815  
<a name="l00816"></a>00816          <span class="keywordflow">if</span>(i_inputLength==0) 
<a name="l00817"></a>00817             i_inputLength=w; 
<a name="l00818"></a>00818  
<a name="l00819"></a>00819          QGridLayout* gridLayout = (QGridLayout*)parent; 
<a name="l00820"></a>00820  
<a name="l00821"></a>00821          gridLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>, y, x, 1, w); 
<a name="l00822"></a>00822           
<a name="l00823"></a>00823          gridLayout-&gt;setSpacing(1); 
<a name="l00824"></a>00824          gridLayout-&gt;setColumnMinimumWidth(x,1); 
<a name="l00825"></a>00825          <span class="keywordflow">if</span>(<a class="code" href="classXML2Form.html#ab1d32c23c4b270fd000b5e2d09272f31">grandChildWidget</a>){ 
<a name="l00826"></a>00826  
<a name="l00827"></a>00827             gridLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#ab1d32c23c4b270fd000b5e2d09272f31">grandChildWidget</a>, y, x+w, 1, 1); 
<a name="l00828"></a>00828  
<a name="l00829"></a>00829             <a class="code" href="classXML2Form.html#ab1d32c23c4b270fd000b5e2d09272f31">grandChildWidget</a>=NULL; 
<a name="l00830"></a>00830          } 
<a name="l00831"></a>00831       } 
<a name="l00832"></a>00832    } 
<a name="l00833"></a>00833  
<a name="l00834"></a>00834    <span class="comment">// exception for hard coded form labels </span>
<a name="l00835"></a>00835    <span class="comment">// </span>
<a name="l00836"></a>00836    <span class="keywordflow">if</span>(childElement.nodeName() == <span class="stringliteral">&quot;Label&quot;</span>){ 
<a name="l00837"></a>00837  
<a name="l00838"></a>00838       <span class="keywordtype">int</span> x = childElement.attribute(<span class="stringliteral">&quot;posX&quot;</span>).toInt(); 
<a name="l00839"></a>00839       <span class="keywordtype">int</span> y = childElement.attribute(<span class="stringliteral">&quot;posY&quot;</span>).toInt(); 
<a name="l00840"></a>00840       <span class="keywordtype">int</span> w = childElement.attribute(<span class="stringliteral">&quot;gridWidth&quot;</span>).toInt(); 
<a name="l00841"></a>00841  
<a name="l00842"></a>00842       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a> = <span class="keyword">new</span> <a class="code" href="classLabel.html">Label</a>; 
<a name="l00843"></a>00843       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> = w;
<a name="l00844"></a>00844       QString labelName = childElement.attribute(<span class="stringliteral">&quot;text&quot;</span>); 
<a name="l00845"></a>00845       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setAccessibleName(labelName); 
<a name="l00846"></a>00846  
<a name="l00847"></a>00847       QPalette p = <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;palette(); 
<a name="l00848"></a>00848       p.setColor(QPalette::Foreground, Qt::blue); 
<a name="l00849"></a>00849       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setPalette(p); 
<a name="l00850"></a>00850  
<a name="l00851"></a>00851       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setText(labelName); 
<a name="l00852"></a>00852       <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setMaximumWidth(w*i_widthFactor); 
<a name="l00853"></a>00853  
<a name="l00854"></a>00854       <span class="comment">// dont show hardcoded labels when it is a colon &#39;:&#39; #jobnr: 18038 </span>
<a name="l00855"></a>00855       <span class="comment">// </span>
<a name="l00856"></a>00856       <span class="keywordflow">if</span>(labelName==<span class="stringliteral">&quot;:&quot;</span>){ 
<a name="l00857"></a>00857          <a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>-&gt;setHidden(<span class="keyword">true</span>); 
<a name="l00858"></a>00858       } 
<a name="l00859"></a>00859  
<a name="l00860"></a>00860       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l00861"></a>00861  
<a name="l00862"></a>00862       <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QBoxLayout&quot;</span>)){ 
<a name="l00863"></a>00863  
<a name="l00864"></a>00864          QBoxLayout* boxLayout = (QBoxLayout*)parent; 
<a name="l00865"></a>00865          boxLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>); 
<a name="l00866"></a>00866  
<a name="l00867"></a>00867       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QGridLayout&quot;</span>)){ 
<a name="l00868"></a>00868  
<a name="l00869"></a>00869          QGridLayout* gridLayout = (QGridLayout*)parent; 
<a name="l00870"></a>00870          gridLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#ade9a27a26e1d017fd4f851b5007741af">label</a>, y, x, 1, w); 
<a name="l00871"></a>00871  
<a name="l00872"></a>00872          gridLayout-&gt;setColumnMinimumWidth(x,w); 
<a name="l00873"></a>00873          gridLayout-&gt;setColumnStretch(x,0); 
<a name="l00874"></a>00874       } 
<a name="l00875"></a>00875    } 
<a name="l00876"></a>00876    <span class="keywordflow">return</span> <span class="keyword">true</span>; 
<a name="l00877"></a>00877 } 
<a name="l00878"></a>00878  
<a name="l00879"></a>00879  
<a name="l00880"></a>00880 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00881"></a>00881 <span class="comment">// Method       : handleTableColumn() </span>
<a name="l00882"></a>00882 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l00883"></a>00883 <span class="comment">// Description  : proceeds the table columns handling - display array </span>
<a name="l00884"></a>00884 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l00885"></a>00885  
<a name="l00886"></a><a class="code" href="classXML2Form.html#ad1f3322e4844ad7ede46bd5a2360d4f6">00886</a> <span class="keywordtype">bool</span> <a class="code" href="classXML2Form.html#ad1f3322e4844ad7ede46bd5a2360d4f6">XML2Form::handleTableColumn</a>(<span class="keyword">const</span> QDomElement&amp; childElement, QLayout* parent) 
<a name="l00887"></a>00887 { 
<a name="l00888"></a>00888 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;handleTableColumn&quot;</span>, <span class="stringliteral">&quot;const QDomElement&amp; childElement, QLayout* parent&quot;</span>);
<a name="l00889"></a>00889    QString firstNodeName = childElement.nodeName(); 
<a name="l00890"></a>00890  
<a name="l00891"></a>00891    <span class="keywordflow">if</span>(firstNodeName == <span class="stringliteral">&quot;Table&quot;</span>){ 
<a name="l00892"></a>00892       <a class="code" href="classTableModel.html">TableModel</a> *<a class="code" href="classXML2Form.html#af3d7959ecccc1032081211b0681fea50">model</a> = <span class="keyword">new</span> <a class="code" href="classTableModel.html">TableModel</a>(<a class="code" href="classXML2Form.html#a11097ff5d10cd176646e3c154405c035">i_screenRecRow</a>, 
<a name="l00893"></a>00893                                          <a class="code" href="classXML2Form.html#ac6c302b110a9608d7f607199a22d8a7b">i_screenRecCol</a>, 0); 
<a name="l00894"></a>00894  
<a name="l00895"></a>00895       QSortFilterProxyModel *proxy = <span class="keyword">new</span> <a class="code" href="classMyFilter.html">MyFilter</a>(); 
<a name="l00896"></a>00896       proxy-&gt;setSourceModel(model); 
<a name="l00897"></a>00897  
<a name="l00898"></a>00898       <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a> = <span class="keyword">new</span> <a class="code" href="classTableView.html">TableView</a>(); 
<a name="l00899"></a>00899       <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;<a class="code" href="classTableView.html#abb4a46ca1492e88b8fe2fa9b68595340">pageSize</a> = <a class="code" href="classXML2Form.html#a11097ff5d10cd176646e3c154405c035">i_screenRecRow</a>;
<a name="l00900"></a>00900       <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>; 
<a name="l00901"></a>00901       p_screenRecord-&gt;<a class="code" href="classTableView.html#aa26e19998b21b401d0f7b4c703a7c91d">tabName</a> = childElement.attribute(<span class="stringliteral">&quot;tabName&quot;</span>); 
<a name="l00902"></a>00902       p_screenRecord-&gt;setShowGrid(<span class="keyword">true</span>); 
<a name="l00903"></a>00903       p_screenRecord-&gt;setModel(proxy); 
<a name="l00904"></a>00904       <span class="comment">//p_screenRecord-&gt;setItemDelegate(p_delegate); </span>
<a name="l00905"></a>00905       p_screenRecord-&gt;verticalHeader()-&gt;hide(); 
<a name="l00906"></a>00906       p_screenRecord-&gt;setAlternatingRowColors(<span class="keyword">true</span>); 
<a name="l00907"></a>00907       p_screenRecord-&gt;setShowGrid(<span class="keyword">true</span>); 
<a name="l00908"></a>00908       <span class="comment">//p_screenRecord-&gt;setMinimumSize(500,500); </span>
<a name="l00909"></a>00909 
<a name="l00910"></a>00910       <span class="comment">// when one column is clicked by the user  </span>
<a name="l00911"></a>00911       <span class="comment">// the entire row hast to be highlighted </span>
<a name="l00912"></a>00912       <span class="comment">// </span>
<a name="l00913"></a>00913         p_screenRecord-&gt;setSelectionBehavior(QAbstractItemView::SelectRows); 
<a name="l00914"></a>00914       p_screenRecord-&gt;setSelectionMode(QAbstractItemView::SingleSelection); 
<a name="l00915"></a>00915     
<a name="l00916"></a>00916       <span class="comment">// column should only use the space it really needs </span>
<a name="l00917"></a>00917       <span class="comment">// </span>
<a name="l00918"></a>00918       p_screenRecord-&gt;resizeColumnsToContents(); <span class="comment">//fdinfo: jobnr:18049 </span>
<a name="l00919"></a>00919  
<a name="l00920"></a>00920       connect(p_screenRecord-&gt;selectionModel(), SIGNAL(currentChanged(QModelIndex,QModelIndex)), <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>, SLOT(fieldChanged(QModelIndex, QModelIndex))); 
<a name="l00921"></a>00921  
<a name="l00922"></a>00922       QHeaderView *header = p_screenRecord-&gt;horizontalHeader(); 
<a name="l00923"></a>00923       header-&gt;setMinimumSectionSize(-1); 
<a name="l00924"></a>00924       header-&gt;setContextMenuPolicy(Qt::ActionsContextMenu); 
<a name="l00925"></a>00925         header-&gt;setMovable(<span class="keyword">true</span>); 
<a name="l00926"></a>00926         header-&gt;setStretchLastSection(<span class="keyword">true</span>); 
<a name="l00927"></a>00927  
<a name="l00928"></a>00928       <span class="comment">// allow to click the header sections </span>
<a name="l00929"></a>00929       <span class="comment">// </span>
<a name="l00930"></a>00930       header-&gt;setClickable(<span class="keyword">true</span>); 
<a name="l00931"></a>00931  
<a name="l00932"></a>00932       <span class="comment">// display the sort indicator in the relevant header section </span>
<a name="l00933"></a>00933       <span class="comment">// </span>
<a name="l00934"></a>00934       header-&gt;setSortIndicatorShown(<span class="keyword">true</span>);  
<a name="l00935"></a>00935  
<a name="l00936"></a>00936       <span class="comment">// set the sort indicators directions </span>
<a name="l00937"></a>00937       <span class="comment">// </span>
<a name="l00938"></a>00938       header-&gt;setSortIndicator(0, Qt::AscendingOrder); <span class="comment">//sortieren </span>
<a name="l00939"></a>00939  
<a name="l00940"></a>00940         QObject::connect(header, SIGNAL(sectionClicked(<span class="keywordtype">int</span>)), 
<a name="l00941"></a>00941                                                   p_screenRecord, SLOT(sortByColumn(<span class="keywordtype">int</span>))); 
<a name="l00942"></a>00942  
<a name="l00943"></a>00943         QObject::disconnect(header, SIGNAL(sectionPressed(<span class="keywordtype">int</span>)), 
<a name="l00944"></a>00944                                                           p_screenRecord, SLOT(selectColumn(<span class="keywordtype">int</span>))); 
<a name="l00945"></a>00945    } 
<a name="l00946"></a>00946  
<a name="l00947"></a>00947    QSize screenRecordSize(0, 0);
<a name="l00948"></a>00948 
<a name="l00949"></a>00949    QDomNodeList children = childElement.childNodes(); 
<a name="l00950"></a>00950    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;children.count(); ++i){ 
<a name="l00951"></a>00951  
<a name="l00952"></a>00952       QDomNode child = children.at(i); 
<a name="l00953"></a>00953       <span class="keywordflow">if</span>(!child.isElement()){ 
<a name="l00954"></a>00954          <span class="keywordflow">continue</span>; 
<a name="l00955"></a>00955       } 
<a name="l00956"></a>00956  
<a name="l00957"></a>00957       QDomElement currentElement = child.toElement().firstChildElement(); 
<a name="l00958"></a>00958  
<a name="l00959"></a>00959       QString nodeName = currentElement.nodeName(); 
<a name="l00960"></a>00960  
<a name="l00961"></a>00961       <span class="keywordtype">int</span> w = currentElement.attribute(<span class="stringliteral">&quot;width&quot;</span>).toInt()*10; 
<a name="l00962"></a>00962 
<a name="l00963"></a>00963       screenRecordSize.rwidth() += w;
<a name="l00964"></a>00964 
<a name="l00965"></a>00965       QHeaderView *header = <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;horizontalHeader(); 
<a name="l00966"></a>00966       header-&gt;resizeSection(i, w); 
<a name="l00967"></a>00967       w = header-&gt;sectionSize(i); 
<a name="l00968"></a>00968  
<a name="l00969"></a>00969       <span class="keywordflow">if</span>(nodeName == <span class="stringliteral">&quot;Edit&quot;</span>){
<a name="l00970"></a>00970          <a class="code" href="classLineEditDelegate.html">LineEditDelegate</a> *delegate = <span class="keyword">new</span> <a class="code" href="classLineEditDelegate.html">LineEditDelegate</a>(currentElement.parentNode().toElement()); 
<a name="l00971"></a>00971          <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setItemDelegateForColumn(i, delegate); 
<a name="l00972"></a>00972 
<a name="l00973"></a>00973          <span class="keywordtype">int</span> fieldCount = <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.count();
<a name="l00974"></a>00974          <span class="keywordtype">int</span> colCount = children.count();
<a name="l00975"></a>00975 
<a name="l00976"></a>00976          <span class="keywordtype">int</span> fieldAt = fieldCount - 1 - colCount;
<a name="l00977"></a>00977          <span class="keywordflow">if</span>(fieldAt &gt;= 0 &amp;&amp; <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.at(fieldAt)-&gt;inherits(<span class="stringliteral">&quot;Label&quot;</span>)){
<a name="l00978"></a>00978             <a class="code" href="classLabel.html">Label</a> *wi = (<a class="code" href="classLabel.html">Label</a>*) <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.at(fieldAt);
<a name="l00979"></a>00979             <span class="keywordflow">if</span>(wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> == (w/10) ||
<a name="l00980"></a>00980                wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> == (w/10)-1 ||
<a name="l00981"></a>00981                wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a>-1 == (w/10)){
<a name="l00982"></a>00982                <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;<a class="code" href="classTableView.html#a5a86ed0c209382e0c31266952d3fafaf">setColumnLabel</a>(i, wi);
<a name="l00983"></a>00983                wi-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00984"></a>00984             }
<a name="l00985"></a>00985          }
<a name="l00986"></a>00986          <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; delegate; 
<a name="l00987"></a>00987       }
<a name="l00988"></a>00988 
<a name="l00989"></a>00989       <span class="keywordflow">if</span>(nodeName == <span class="stringliteral">&quot;ButtonEdit&quot;</span>){ 
<a name="l00990"></a>00990          <a class="code" href="classLineEditDelegate.html">LineEditDelegate</a> *delegate = <span class="keyword">new</span> <a class="code" href="classLineEditDelegate.html">LineEditDelegate</a>(currentElement.parentNode().toElement()); 
<a name="l00991"></a>00991          <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setItemDelegateForColumn(i, delegate); 
<a name="l00992"></a>00992 
<a name="l00993"></a>00993          <span class="keywordtype">int</span> fieldCount = <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.count();
<a name="l00994"></a>00994          <span class="keywordtype">int</span> colCount = children.count();
<a name="l00995"></a>00995 
<a name="l00996"></a>00996          <span class="keywordtype">int</span> fieldAt = fieldCount - 1 - colCount;
<a name="l00997"></a>00997          <span class="keywordflow">if</span>(fieldAt &gt;= 0 &amp;&amp; <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.at(fieldAt)-&gt;inherits(<span class="stringliteral">&quot;Label&quot;</span>)){
<a name="l00998"></a>00998             <a class="code" href="classLabel.html">Label</a> *wi = (<a class="code" href="classLabel.html">Label</a>*) <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.at(fieldAt);
<a name="l00999"></a>00999             <span class="keywordflow">if</span>(wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> == (w/10) ||
<a name="l01000"></a>01000                wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> == (w/10)-1 ||
<a name="l01001"></a>01001                wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a>-1 == (w/10)){
<a name="l01002"></a>01002                <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;<a class="code" href="classTableView.html#a5a86ed0c209382e0c31266952d3fafaf">setColumnLabel</a>(i, wi);
<a name="l01003"></a>01003                wi-&gt;setVisible(<span class="keyword">false</span>);
<a name="l01004"></a>01004             }
<a name="l01005"></a>01005          }
<a name="l01006"></a>01006          <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; delegate; 
<a name="l01007"></a>01007       }
<a name="l01008"></a>01008 
<a name="l01009"></a>01009       <span class="keywordflow">if</span>(nodeName == <span class="stringliteral">&quot;DateEdit&quot;</span>){ 
<a name="l01010"></a>01010          <a class="code" href="classLineEditDelegate.html">LineEditDelegate</a> *delegate = <span class="keyword">new</span> <a class="code" href="classLineEditDelegate.html">LineEditDelegate</a>(currentElement.parentNode().toElement()); 
<a name="l01011"></a>01011          <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setItemDelegateForColumn(i, delegate); 
<a name="l01012"></a>01012 
<a name="l01013"></a>01013          <span class="keywordtype">int</span> fieldCount = <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.count();
<a name="l01014"></a>01014          <span class="keywordtype">int</span> colCount = children.count();
<a name="l01015"></a>01015 
<a name="l01016"></a>01016          <span class="keywordtype">int</span> fieldAt = fieldCount - 1 - colCount;
<a name="l01017"></a>01017          <span class="keywordflow">if</span>(fieldAt &gt;= 0 &amp;&amp; <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.at(fieldAt)-&gt;inherits(<span class="stringliteral">&quot;Label&quot;</span>)){
<a name="l01018"></a>01018             <a class="code" href="classLabel.html">Label</a> *wi = (<a class="code" href="classLabel.html">Label</a>*) <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a>.at(fieldAt);
<a name="l01019"></a>01019             <span class="keywordflow">if</span>(wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> == (w/10) ||
<a name="l01020"></a>01020                wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a> == (w/10)-1 ||
<a name="l01021"></a>01021                wi-&gt;<a class="code" href="classLabel.html#ac1b8873ac4b399c5f70305b08aa7f5c8">w</a>-1 == (w/10)){
<a name="l01022"></a>01022                <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;<a class="code" href="classTableView.html#a5a86ed0c209382e0c31266952d3fafaf">setColumnLabel</a>(i, wi);
<a name="l01023"></a>01023                wi-&gt;setVisible(<span class="keyword">false</span>);
<a name="l01024"></a>01024             }
<a name="l01025"></a>01025          }
<a name="l01026"></a>01026          <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; delegate; 
<a name="l01027"></a>01027       } 
<a name="l01028"></a>01028  
<a name="l01029"></a>01029       <span class="keywordflow">if</span>(nodeName == <span class="stringliteral">&quot;TextEdit&quot;</span>){ 
<a name="l01030"></a>01030          <a class="code" href="classTextEdit.html">TextEdit</a> *textEdit = <a class="code" href="classWidgetHelper.html#a937976f257925ced21d24388e56c94a6">WidgetHelper::createTextEdit</a>(currentElement); 
<a name="l01031"></a>01031       } 
<a name="l01032"></a>01032        
<a name="l01033"></a>01033    } 
<a name="l01034"></a>01034 
<a name="l01035"></a>01035    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setMinimumSize(screenRecordSize);
<a name="l01036"></a>01036 
<a name="l01037"></a>01037    <span class="keywordflow">if</span>(firstNodeName == <span class="stringliteral">&quot;Table&quot;</span> &amp;&amp; <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a> != NULL){ 
<a name="l01038"></a>01038       <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QBoxLayout&quot;</span>)) 
<a name="l01039"></a>01039       { 
<a name="l01040"></a>01040          QBoxLayout* boxLayout = (QBoxLayout*)parent; 
<a name="l01041"></a>01041          boxLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>); 
<a name="l01042"></a>01042          boxLayout-&gt;setAlignment(Qt::AlignTop); 
<a name="l01043"></a>01043  
<a name="l01044"></a>01044       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QGridLayout&quot;</span>)){ 
<a name="l01045"></a>01045  
<a name="l01046"></a>01046          <span class="keywordtype">int</span> x = childElement.parentNode().toElement().attribute(<span class="stringliteral">&quot;posX&quot;</span>).toInt(); 
<a name="l01047"></a>01047          <span class="keywordtype">int</span> y = childElement.parentNode().toElement().attribute(<span class="stringliteral">&quot;posY&quot;</span>).toInt(); 
<a name="l01048"></a>01048          <span class="keywordtype">int</span> w = childElement.parentNode().toElement().attribute(<span class="stringliteral">&quot;gridWidth&quot;</span>).toInt(); 
<a name="l01049"></a>01049  
<a name="l01050"></a>01050          QGridLayout* gridLayout = (QGridLayout*)parent; 
<a name="l01051"></a>01051          gridLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>, y, x, 1, w); 
<a name="l01052"></a>01052     
<a name="l01053"></a>01053          gridLayout-&gt;setColumnMinimumWidth(x,w); 
<a name="l01054"></a>01054          gridLayout-&gt;setColumnStretch(x,0); 
<a name="l01055"></a>01055       } 
<a name="l01056"></a>01056    } 
<a name="l01057"></a>01057    <span class="keywordflow">return</span> <span class="keyword">true</span>; 
<a name="l01058"></a>01058  
<a name="l01059"></a>01059 } 
<a name="l01060"></a>01060  
<a name="l01061"></a>01061 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l01062"></a>01062 <span class="comment">// Method       : handleTableColumn() </span>
<a name="l01063"></a>01063 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l01064"></a>01064 <span class="comment">// Description  : proceeds the table columns handling - display array </span>
<a name="l01065"></a>01065 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l01066"></a>01066  
<a name="l01067"></a><a class="code" href="classXML2Form.html#aca6f9a788c34548d890c8bb9d57ef6e9">01067</a> <span class="keywordtype">bool</span> <a class="code" href="classXML2Form.html#aca6f9a788c34548d890c8bb9d57ef6e9">XML2Form::handleTableColumn2</a>(<span class="keyword">const</span> QDomElement&amp; childElement, QLayout* parent) 
<a name="l01068"></a>01068 { 
<a name="l01069"></a>01069 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;handleTableColumn2&quot;</span>, <span class="stringliteral">&quot;const QDomElement&amp; childElement, QLayout* parent&quot;</span>);
<a name="l01070"></a>01070    QDomElement formTableType = childElement.firstChild().toElement(); 
<a name="l01071"></a>01071    <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>    = NULL; 
<a name="l01072"></a>01072  
<a name="l01073"></a>01073    <span class="comment">//-------------------------------- Arrays -------------------------------- // </span>
<a name="l01074"></a>01074  
<a name="l01075"></a>01075  
<a name="l01076"></a>01076    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;childElement.parentNode().childNodes().count(); i++){ 
<a name="l01077"></a>01077       <a class="code" href="classXML2Form.html#ad747ac3452cf4212ded9dfb4632d6bf8">i_cntFields</a>++; 
<a name="l01078"></a>01078    } 
<a name="l01079"></a>01079    <span class="keywordflow">if</span>(formTableType.nodeName() == <span class="stringliteral">&quot;Edit&quot;</span> ){ 
<a name="l01080"></a>01080  
<a name="l01081"></a>01081       <a class="code" href="classXML2Form.html#aca390efca9cfb6233372fe20f583c2ab">b_tableColumnUsed</a>=<span class="keyword">true</span>; 
<a name="l01082"></a>01082       <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = <a class="code" href="classXML2Form.html#a3e475b021d282927ffd56f28c6836477">tableWidget</a>; 
<a name="l01083"></a>01083    } 
<a name="l01084"></a>01084  
<a name="l01085"></a>01085    <a class="code" href="classTableModel.html">TableModel</a> *<a class="code" href="classXML2Form.html#af3d7959ecccc1032081211b0681fea50">model</a> = <span class="keyword">new</span> <a class="code" href="classTableModel.html">TableModel</a>(<a class="code" href="classXML2Form.html#a11097ff5d10cd176646e3c154405c035">i_screenRecRow</a>, 
<a name="l01086"></a>01086                             <a class="code" href="classXML2Form.html#ac6c302b110a9608d7f607199a22d8a7b">i_screenRecCol</a>,  
<a name="l01087"></a>01087                             0); 
<a name="l01088"></a>01088  
<a name="l01089"></a>01089  
<a name="l01090"></a>01090         QSortFilterProxyModel *proxy = <span class="keyword">new</span> <a class="code" href="classMyFilter.html">MyFilter</a>(); 
<a name="l01091"></a>01091           proxy-&gt;setSourceModel(model); 
<a name="l01092"></a>01092  
<a name="l01093"></a>01093    QString qs_sqlType =  childElement.attribute(<span class="stringliteral">&quot;sqlType&quot;</span>); 
<a name="l01094"></a>01094    QString icon = <span class="stringliteral">&quot;pics/&quot;</span>; 
<a name="l01095"></a>01095    icon.append(formTableType.attribute(<span class="stringliteral">&quot;image&quot;</span>)); 
<a name="l01096"></a>01096    <span class="keywordtype">int</span> i_inputLength = <a class="code" href="classXML2Form.html#ae1ab9e5e978954651c10800d4dd16b89">getLengthBySqlType</a>(qs_sqlType); 
<a name="l01097"></a>01097  
<a name="l01098"></a>01098    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a> = <span class="keyword">new</span> <a class="code" href="classTableView.html">TableView</a>(); 
<a name="l01099"></a>01099    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;<a class="code" href="classTableView.html#aa26e19998b21b401d0f7b4c703a7c91d">tabName</a> = childElement.attribute(<span class="stringliteral">&quot;tabName&quot;</span>); 
<a name="l01100"></a>01100    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setShowGrid(<span class="keyword">true</span>); 
<a name="l01101"></a>01101    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setModel(proxy); 
<a name="l01102"></a>01102    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setItemDelegate(<a class="code" href="classXML2Form.html#aa69423c0c79ac964cb295be17856bb85">p_delegate</a>); 
<a name="l01103"></a>01103    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;verticalHeader()-&gt;hide(); 
<a name="l01104"></a>01104  
<a name="l01105"></a>01105    QHeaderView *header = <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;horizontalHeader(); 
<a name="l01106"></a>01106    header-&gt;setContextMenuPolicy(Qt::ActionsContextMenu); 
<a name="l01107"></a>01107         header-&gt;setMovable(<span class="keyword">true</span>); 
<a name="l01108"></a>01108  
<a name="l01109"></a>01109         header-&gt;setStretchLastSection(<span class="keyword">true</span>); 
<a name="l01110"></a>01110    <span class="comment">// when one column is clicked by the user  </span>
<a name="l01111"></a>01111    <span class="comment">// the entire row hast to be highlighted </span>
<a name="l01112"></a>01112    <span class="comment">// </span>
<a name="l01113"></a>01113         <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setSelectionBehavior(QAbstractItemView::SelectRows); 
<a name="l01114"></a>01114     
<a name="l01115"></a>01115    <span class="comment">// allow to click the header sections </span>
<a name="l01116"></a>01116    <span class="comment">// </span>
<a name="l01117"></a>01117    header-&gt;setClickable(<span class="keyword">true</span>); 
<a name="l01118"></a>01118  
<a name="l01119"></a>01119    <span class="comment">// display the sort indicator in the relevant header section </span>
<a name="l01120"></a>01120    <span class="comment">// </span>
<a name="l01121"></a>01121    header-&gt;setSortIndicatorShown(<span class="keyword">true</span>);  
<a name="l01122"></a>01122  
<a name="l01123"></a>01123    <span class="comment">// set the sort indicators directions </span>
<a name="l01124"></a>01124    <span class="comment">// </span>
<a name="l01125"></a>01125    header-&gt;setSortIndicator(0, Qt::AscendingOrder); <span class="comment">//sortieren </span>
<a name="l01126"></a>01126  
<a name="l01127"></a>01127    <span class="comment">// column should only use the space it really needs </span>
<a name="l01128"></a>01128    <span class="comment">// </span>
<a name="l01129"></a>01129    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;resizeColumnsToContents(); <span class="comment">//fdinfo: jobnr:18049 </span>
<a name="l01130"></a>01130  
<a name="l01131"></a>01131         QObject::connect(header, SIGNAL(sectionClicked(<span class="keywordtype">int</span>)), 
<a name="l01132"></a>01132                                                   <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>, SLOT(sortByColumn(<span class="keywordtype">int</span>))); 
<a name="l01133"></a>01133  
<a name="l01134"></a>01134         QObject::disconnect(header, SIGNAL(sectionPressed(<span class="keywordtype">int</span>)), 
<a name="l01135"></a>01135                                                           <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>, SLOT(selectColumn(<span class="keywordtype">int</span>))); 
<a name="l01136"></a>01136  
<a name="l01137"></a>01137    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setAlternatingRowColors(<span class="keyword">true</span>); 
<a name="l01138"></a>01138    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setShowGrid(<span class="keyword">true</span>); 
<a name="l01139"></a>01139    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setSelectionBehavior(QAbstractItemView::SelectRows); 
<a name="l01140"></a>01140    <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>-&gt;setSelectionMode(QAbstractItemView::SingleSelection); 
<a name="l01141"></a>01141  
<a name="l01142"></a>01142    <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a> = <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>; 
<a name="l01143"></a>01143    <a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>-&gt;setMinimumSize(500,500); 
<a name="l01144"></a>01144    <a class="code" href="classXML2Form.html#a4b16916a87a4c7d23e5708d47c211777">ql_formFields</a> &lt;&lt; <a class="code" href="classXML2Form.html#a03f67ad20c8828f5864659ce6740bcb7">p_screenRecord</a>; 
<a name="l01145"></a>01145  
<a name="l01146"></a>01146    <span class="keywordflow">if</span>(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>){ 
<a name="l01147"></a>01147  
<a name="l01148"></a>01148       <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QBoxLayout&quot;</span>)) 
<a name="l01149"></a>01149       { 
<a name="l01150"></a>01150          QBoxLayout* boxLayout = (QBoxLayout*)parent; 
<a name="l01151"></a>01151          boxLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>); 
<a name="l01152"></a>01152          boxLayout-&gt;setAlignment(Qt::AlignTop); 
<a name="l01153"></a>01153  
<a name="l01154"></a>01154       }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(parent-&gt;inherits(<span class="stringliteral">&quot;QGridLayout&quot;</span>)){ 
<a name="l01155"></a>01155  
<a name="l01156"></a>01156          <span class="keywordtype">int</span> x = formTableType.attribute(<span class="stringliteral">&quot;posX&quot;</span>).toInt(); 
<a name="l01157"></a>01157          <span class="keywordtype">int</span> y = formTableType.attribute(<span class="stringliteral">&quot;posY&quot;</span>).toInt(); 
<a name="l01158"></a>01158          <span class="keywordtype">int</span> w = formTableType.attribute(<span class="stringliteral">&quot;gridWidth&quot;</span>).toInt(); 
<a name="l01159"></a>01159  
<a name="l01160"></a>01160          QGridLayout* gridLayout = (QGridLayout*)parent; 
<a name="l01161"></a>01161          gridLayout-&gt;addWidget(<a class="code" href="classXML2Form.html#a22c224e3d1fa058bff67bea04cf0a35b">childWidget</a>, y, x, 1, w); 
<a name="l01162"></a>01162     
<a name="l01163"></a>01163          gridLayout-&gt;setColumnMinimumWidth(x,w); 
<a name="l01164"></a>01164          gridLayout-&gt;setColumnStretch(x,0); 
<a name="l01165"></a>01165       } 
<a name="l01166"></a>01166    } 
<a name="l01167"></a>01167    <span class="keywordflow">return</span> <span class="keyword">true</span>; 
<a name="l01168"></a>01168 } 
<a name="l01169"></a>01169  
<a name="l01170"></a>01170 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l01171"></a>01171 <span class="comment">// Method       : getLengthBySqlType() </span>
<a name="l01172"></a>01172 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l01173"></a>01173 <span class="comment">// Description  : detect length for input  </span>
<a name="l01174"></a>01174 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l01175"></a>01175  
<a name="l01176"></a><a class="code" href="classXML2Form.html#ae1ab9e5e978954651c10800d4dd16b89">01176</a> <span class="keywordtype">int</span> <a class="code" href="classXML2Form.html#ae1ab9e5e978954651c10800d4dd16b89">XML2Form::getLengthBySqlType</a>(<span class="keyword">const</span> QString&amp; sqlType) 
<a name="l01177"></a>01177 { 
<a name="l01178"></a>01178 MainFrame::vdcdebug(<span class="stringliteral">&quot;XML2Form&quot;</span>,<span class="stringliteral">&quot;getLengthBySqlType&quot;</span>, <span class="stringliteral">&quot;const QString&amp; sqlType&quot;</span>);
<a name="l01179"></a>01179    <span class="comment">// jobnr: 18037  </span>
<a name="l01180"></a>01180    <span class="comment">// reading the type size from the xml file </span>
<a name="l01181"></a>01181    <span class="comment">// it&#39;s an element attribute of this form e.g.: </span>
<a name="l01182"></a>01182    <span class="comment">//    sqlType=&quot;CHAR(25)&quot; </span>
<a name="l01183"></a>01183    <span class="keywordflow">if</span>(sqlType.contains(<span class="stringliteral">&quot;CHAR&quot;</span>)){ 
<a name="l01184"></a>01184       <span class="keywordtype">int</span> start = sqlType.indexOf(<span class="stringliteral">&quot;(&quot;</span>); 
<a name="l01185"></a>01185       <span class="keywordtype">int</span> end   = sqlType.indexOf(<span class="stringliteral">&quot;)&quot;</span>); 
<a name="l01186"></a>01186  
<a name="l01187"></a>01187       QString result = <span class="stringliteral">&quot;&quot;</span>; 
<a name="l01188"></a>01188       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=start+1;i&lt;end;i++){ 
<a name="l01189"></a>01189          result.append(sqlType.at(i)); 
<a name="l01190"></a>01190       } 
<a name="l01191"></a>01191  
<a name="l01192"></a>01192       <span class="keywordflow">return</span> result.toInt(); 
<a name="l01193"></a>01193    } 
<a name="l01194"></a>01194  
<a name="l01195"></a>01195    <span class="keywordflow">return</span> 0; 
<a name="l01196"></a>01196  
<a name="l01197"></a>01197 } 
<a name="l01198"></a>01198  
<a name="l01199"></a>01199  
<a name="l01200"></a>01200 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l01201"></a>01201 <span class="comment">// Method       : PageTab() </span>
<a name="l01202"></a>01202 <span class="comment">// Filename     : xml2form.cpp </span>
<a name="l01203"></a>01203 <span class="comment">// Description  : constructor for the TabWidgetItem </span>
<a name="l01204"></a>01204 <span class="comment">//------------------------------------------------------------------------------ </span>
<a name="l01205"></a>01205  
<a name="l01206"></a><a class="code" href="classPageTab.html#ac49b982cd05f205bbcaa5e788792d387">01206</a> <a class="code" href="classPageTab.html#ac49b982cd05f205bbcaa5e788792d387">PageTab::PageTab</a>() : QWidget() 
<a name="l01207"></a>01207 { 
<a name="l01208"></a>01208 MainFrame::vdcdebug(<span class="stringliteral">&quot;PageTab&quot;</span>,<span class="stringliteral">&quot;PageTab&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l01209"></a>01209    QGridLayout *tabLayout = <span class="keyword">new</span> QGridLayout; 
<a name="l01210"></a>01210 <span class="comment">//   tabLayout-&gt;setSpacing(1); </span>
<a name="l01211"></a>01211  
<a name="l01212"></a>01212    QLabel *test = <span class="keyword">new</span> QLabel; 
<a name="l01213"></a>01213  
<a name="l01214"></a>01214    test-&gt;setText(<span class="stringliteral">&quot;test&quot;</span>); 
<a name="l01215"></a>01215    tabLayout-&gt;addWidget(test); 
<a name="l01216"></a>01216    setLayout(tabLayout); 
<a name="l01217"></a>01217 } 
<a name="l01218"></a>01218  
<a name="l01219"></a>01219  
<a name="l01220"></a><a class="code" href="classmyValidatorToUpper.html#afbceaad56dd5550648ce8dd5473fc77d">01220</a> <a class="code" href="namespaceFgl.html#a66700792cb225549384ae76c1057cf22">QValidator::State</a> <a class="code" href="classmyValidatorToUpper.html#afbceaad56dd5550648ce8dd5473fc77d">myValidatorToUpper::validate</a>(QString &amp;input, <span class="keywordtype">int</span> &amp;pos)<span class="keyword"> </span>
<a name="l01221"></a>01221 <span class="keyword">const </span>
<a name="l01222"></a>01222 <span class="keyword"></span>{ 
<a name="l01223"></a>01223    <span class="comment">// the input has to be upshift in any case </span>
<a name="l01224"></a>01224    <span class="comment">// </span>
<a name="l01225"></a>01225    input = input.toUpper(); 
<a name="l01226"></a>01226    <span class="keywordflow">return</span> QValidator::Acceptable;
<a name="l01227"></a>01227 } 
<a name="l01228"></a>01228  
<a name="l01229"></a>01229  
<a name="l01230"></a><a class="code" href="classmyValidatorToLower.html#a3fe7ec76e2c361779f63df7804aa747c">01230</a> <a class="code" href="namespaceFgl.html#a66700792cb225549384ae76c1057cf22">QValidator::State</a> <a class="code" href="classmyValidatorToLower.html#a3fe7ec76e2c361779f63df7804aa747c">myValidatorToLower::validate</a>(QString &amp;input, <span class="keywordtype">int</span> &amp;pos)<span class="keyword"> </span>
<a name="l01231"></a>01231 <span class="keyword">const </span>
<a name="l01232"></a>01232 <span class="keyword"></span>{ 
<a name="l01233"></a>01233    <span class="comment">// the input has to be downshift in any case </span>
<a name="l01234"></a>01234    <span class="comment">// </span>
<a name="l01235"></a>01235    input = input.toLower(); 
<a name="l01236"></a>01236    <span class="keywordflow">return</span> QValidator::Acceptable;
<a name="l01237"></a>01237 } 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Mar 6 2012 14:00:11 for VDC by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
