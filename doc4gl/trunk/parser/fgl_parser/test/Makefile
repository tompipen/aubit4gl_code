
CPP_UNIT_DIR=/usr/local/cppunit-1.9.12
CXX=g++
CXXFLAGS=-g -I .. -I ../ast -I ../lexer -I ../error -I ../keyword \
-I $(CPP_UNIT_DIR)/include

# =========================================================
# Generated cppunit tests to test all 4gl(s) in a directory
# This is generated by the genTestSuite.pl script
# =========================================================
GenParserTest_OBJECTS = MainGenFglTest.o GenFglTest.o 
GenParserTest: $(GenParserTest_OBJECTS) 
	$(CXX) $(CXXFLAGS) -o $@ $(GenParserTest_OBJECTS) -ldl /usr/local/cppunit-1.9.12/src/cppunit/.libs/libcppunit.so ../fgl_parser.so ../ast/fgl_ast.so

# =========================================================
# An executable to parse the 4gl passed as argument.
# =========================================================
ParserFgl_OBJECTS = ParseFgl.o
ParseFgl: $(ParserFgl_OBJECTS) 
	$(CXX) $(CXXFLAGS) -o $@ $(ParserFgl_OBJECTS) -ldl ../fgl_parser.so ../ast/fgl_ast.so

# =========================================================
# Generate the test based on 4gl on subdirectories and
# compile evrithing.
# =========================================================
all: genTest GenParserTest ParseFgl

run: all
	./GenParserTest

genTest:
	perl genTestSuite.pl

clean:
	rm -f *.o *.so GenParserTest ParseFgl


